import{a as ee,P as se}from"./PsLayout.bc5965d6.js";import{d as oe,Z as te,i as p,B as f,H as Z,j as le,o as m,c as b,b as o,w as a,a as l,q as d,t as r,F as K,s as A,n as G,g,f as $,r as c}from"./app.d57d51e9.js";import{u as ae}from"./Validators.cb85894a.js";import{P as ie}from"./PsInput.b3485f1e.js";import{P as re}from"./PsLabel.06b4363b.js";import{P as ne}from"./PsButton.c9fc3d7e.js";import{P as de}from"./PsTextarea.2d2fbd18.js";import{P as _e}from"./PsLabelHeader3.a08d0e2f.js";import{P as ue}from"./PsLabelCaption.b0af0e56.js";import{P as ce}from"./PsIcon.1e42bf4c.js";import{P as me}from"./PsLoading.1f212adc.js";import{P as pe}from"./PsBreadcrumb2.761286c6.js";import{P as fe}from"./PsDropdown.0c78da9b.js";import{P as ge}from"./PsDropdownSelect.13d0e05f.js";import{P as he}from"./PsCheckboxValue.373287f4.js";import{P as be}from"./PsToggle.fddd5498.js";import{P as ve}from"./PsRadioValue.d4f130b1.js";import{P as ye}from"./PsErrorDialog.a25aef9e.js";import{P as we}from"./PsSuccessDialog.a19b3bb4.js";import Ce from"./LanguageUpdateModal.7bbb1950.js";import{P as ke}from"./PsLoadingCircleDialog.c95deca1.js";import{P as $e}from"./PsInputWithRightIcon.8c9e6c80.js";import{P as Pe}from"./PsLabelHeader5.a95f5ede.js";import{_ as Se}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsDangerDialog.1643aeb7.js";import"./PsModal.f198af2b.js";import"./vue-neat-modal.d9ed1877.js";import"./PsWarningDialog.67ba6cb5.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.66190284.js";import"./SidebarSubTab.148b6988.js";import"./PsBannerIcon.0cb3925c.js";import"./PsIcon1.c6e725b1.js";import"./Icons.ebbb778b.js";import"./toggle.6b621a64.js";const Ie=oe({name:"Edit",components:{PsLabelHeader5:Pe,Head:te,PsInput:ie,PsLabel:re,PsButton:ne,PsTextarea:de,PsLabelHeader3:_e,PsLabelCaption:ue,PsIcon:ce,PsLoading:me,PsBreadcrumb2:pe,PsDropdown:fe,PsDropdownSelect:ge,PsCheckboxValue:he,PsToggle:be,PsRadioValue:ve,PsConfirmDialog:ee,PsSuccessDialog:we,PsErrorDialog:ye,LanguageUpdateModal:Ce,PsLoadingCircleDialog:ke,PsInputWithRightIcon:$e},layout:se,props:["errors","status","languages","selectedClientTable","clientCustomField","uiTypes","categories"],setup(e){const s=p(!1),M=p(!1),U=p(),W=p(),B=p(),v=p(),y=p(),w=p(),_=p(!1),L=p(!1),P=p(!1),S=p(!1),T=p(!1),C=p(""),I=p(f(e.clientCustomField.name)),E=p(f(e.clientCustomField.placeholder));setTimeout(()=>{I.value=f(e.clientCustomField.name),E.value=f(e.clientCustomField.placeholder)},3e3);let n=Z({table_id:e.selectedClientTable.id,name:e.clientCustomField.name,ordering:e.clientCustomField.ordering,is_show_sorting:e.clientCustomField.is_show_sorting,is_show_in_filter:e.clientCustomField.is_show_in_filter,placeholder:e.clientCustomField.placeholder,ui_type_id:e.clientCustomField.ui_type_id?e.clientCustomField.ui_type_id:"",is_core_field:e.clientCustomField.is_core_field,mandatory:e.clientCustomField.mandatory==1?"1":"0",is_show:e.clientCustomField.is_show,is_include_in_hideshow:e.clientCustomField.is_include_in_hideshow,category_id:e.clientCustomField.category_id,_method:"put"});const{isEmpty:V,minLength:H}=ae(),j=(i,u)=>{e.errors[i]=u?H(i,u,3):V(i,u)},O=(i,u)=>{e.errors[i]=u?"":V(i,u)},q=i=>{let u=i.keyCode?i.keyCode:i.which;(u<48||u>57)&&i.preventDefault()};function N(){n.is_include_in_hideshow==0?n.is_include_in_hideshow=1:(n.is_include_in_hideshow=0,n.is_show=0,n.is_show_in_filter=0)}function z(){n.is_show==0?n.is_show=1:n.is_show=0}function R(){n.is_show_sorting==0?n.is_show_sorting=1:n.is_show_sorting=0}function t(){n.is_show_in_filter==0?n.is_show_in_filter=1:n.is_show_in_filter=0}function D(){var u,F;let i=!0;if(e.clientCustomField.is_core_field=="0"&&n.ui_type_id==""&&(L.value=!0,i=!1),(n.ordering==""||isNaN(n.ordering))&&(P.value=!0,i=!1),v.value.form.values.length!=0){let h=!1;for(let k=0;k<v.value.form.values.length;k++)if(((u=v.value.form.values[k])==null?void 0:u.value.length)!==0){h=!0;break}h||(S.value=!0,i=!1)}if(y.value.form.values.length!=0){let h=!1;for(let k=0;k<y.value.form.values.length;k++)if(((F=y.value.form.values[k])==null?void 0:F.value.length)!==0){h=!0;break}h||(T.value=!0,i=!1)}if(i!=!0){window.scrollTo(0,0);return}this.$inertia.post(route("tables.fields.update",[e.selectedClientTable.id,e.clientCustomField.id]),Z({nameForm:v.value.form,form:n,placeholderForm:y.value.form,_method:"put"}),{forceFormData:!0,onBefore:()=>{_.value=!0,s.value=!0,w.value.openModal(f("core__be_custom_updating_title"),f("core__be_custom_updating_message"))},onSuccess:()=>{s.value=!1,M.value=!0,setTimeout(()=>{M.value=!1},2e3)},onError:()=>{s.value=!1}})}function J(i){w.value.closeModal(),_.value&&(_.value=!1,B.value.openModal(f("ps_error_dialog__error"),i,f("core__be_btn_ok"),()=>{}))}function Q(i){w.value.closeModal(),_.value=!1,U.value.openModal(f("core__be_awesome_title"),i,f("core__be_btn_ok"),()=>{})}function X(i){v.value.openModal(i,u=>{const F=localStorage.activeLanguage?localStorage.activeLanguage:"en";u.values.forEach(h=>{h.symbol==F&&(I.value=h.value)})})}function Y(i){y.value.openModal(i,u=>{const F=localStorage.activeLanguage?localStorage.activeLanguage:"en";u.values.forEach(h=>{h.symbol==F&&(E.value=h.value)})})}function x(i){P.value=!1;const u=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(u))return!0;i.preventDefault()}return le(async()=>{const i=localStorage.activeLanguage?localStorage.activeLanguage:"en";e.languages.forEach(u=>{u.symbol==i&&(C.value=u.name)})}),{ps_success_dialog:U,activeLanguageName:C,validateNumber:x,validiteUIType:L,validiteOrdering:P,validitePlaceholder:T,showdialog:_,validiteName:S,nameString:I,placeholderString:E,nameLanguageClicked:X,placeholderLanguageClicked:Y,language_update_modal_name:v,language_update_modal_placeholder:y,ps_loading_circle_dialog:w,ps_confirm_dialog:W,ps_error_dialog:B,showErrorDialog:J,showSuccessDialog:Q,validateModuleNameInput:j,validateEmptyInput:O,onlyNumber:q,form:n,handleSubmit:D,loading:s,success:M,handleEnableFilter:N,handleHideShow:z,handleIsShowSorting:R,handleIsShowInFilter:t}},computed:{breadcrumb(){return[{label:f("core__be_dashboard_label"),url:route("admin.index")},{label:f("table_setting_group"),url:route("table.index")},{label:f("core__be_custom_fields"),url:route("tables.fields.index",[this.selectedClientTable.id],{symbol:localStorage.activeLanguage?localStorage.activeLanguage:"en"})},{label:f("core__be_edit_custom_field_label"),color:"text-primary-500"}]}},methods:{handleCancel(){this.$inertia.get(route("tables.fields.index",[this.selectedClientTable.id]),{symbol:localStorage.activeLanguage?localStorage.activeLanguage:"en"})},handleIsInclude(){this.form.is_include_in_hideshow||(this.form.is_show=0)}},mounted(){this.status&&this.status.flag=="success"&&(sessionStorage.setItem("custom_field_reloading","true"),sessionStorage.setItem("custom_field_flag",this.status.flag),sessionStorage.setItem("custom_field_message",this.status.msg),window.location.reload()),this.status&&this.status.flag=="error"&&this.showErrorDialog(this.status.msg);const e=sessionStorage.getItem("custom_field_flag"),s=sessionStorage.getItem("custom_field_message");e&&e=="success"&&(sessionStorage.removeItem("custom_field_flag"),sessionStorage.removeItem("custom_field_message"),this.showSuccessDialog(s))},beforeUpdate(){this.status&&this.status.flag=="success"&&(sessionStorage.setItem("custom_field_reloading","true"),sessionStorage.setItem("custom_field_flag",this.status.flag),sessionStorage.setItem("custom_field_message",this.status.msg),window.location.reload()),this.status&&this.status.flag=="error"&&this.showErrorDialog(this.status.msg)}}),Fe={class:"w-full md:w-196 xl:196"},Le={key:0,class:"mt-8 rounded-lg bg-secondary-50 dark:bg-secondary-800 border border-secondary-200 dark:bprder-secondary-900 shadow-md ps-6 pe-6 md:ps-8 md:pe-24 py-6"},Te=l("span",{class:"text-red-500"},"*",-1),Ee={class:"mt-4 md:mt-6 grid grid-cols-3 items-center"},Ve={class:"rounded-md shadow-xs w-56"},De={class:"pt-2 z-30"},Me=["onClick"],Ne=l("span",{class:"text-red-500"},"*",-1),Ue=l("span",{class:"text-red-500"},"*",-1),Be={class:"mt-10"},He={class:"bg-white dark:bg-secondary-900 rounded-lg border border-secondary-200 dark:bprder-secondary-900 shadow-lg"},je=l("span",{class:"text-red-500"},"*",-1),Oe=l("hr",{class:""},null,-1),qe={class:"py-6 ps-6 pe-6 md:ps-8 md:pe-24 flex flex-col space-y-6"},ze={class:"grid grid-cols-3 items-center"},Re=l("span",{class:"text-red-500 font-medium ms-1"},"*",-1),Ke={class:"w-full col-span-2"},We={class:"grid grid-cols-3 items-center"},Ze=l("span",{class:"text-red-500 font-medium ms-1"},"*",-1),Ae={class:"w-full col-span-2"},Ge={class:"grid grid-cols-3 items-center"},Je=l("span",{class:"text-red-500 font-medium ms-1"},"*",-1),Qe={class:"rounded-md shadow-xs w-56"},Xe={class:"pt-2 z-30"},Ye=["onClick"],xe={class:"grid grid-cols-3 items-center"},es=l("span",{class:"text-red-500 font-medium ms-1"},"*",-1),ss={class:"grid grid-cols-3 items-center"},os=l("span",{class:"text-red-500 font-medium ms-1"},"*",-1),ts={class:"mt-6 md:mt-8 bg-white dark:bg-secondary-900 rounded-lg border border-secondary-200 dark:bprder-secondary-900 shadow-lg"},ls=l("span",{class:"text-red-500"},"*",-1),as=l("hr",{class:""},null,-1),is={class:"py-6 ps-6 pe-6 md:ps-8 md:pe-24 flex flex-col space-y-6"},rs={class:"flex justify-between"},ns={class:"flex justify-between"},ds={key:0,class:"flex justify-between"},_s={key:1,class:"flex justify-between"},us={class:"mt-6 md:mt-8 mb-2.5 flex flex-row justify-end"},cs={key:2,class:"transition-all duration-300",textColor:"text-white"},ms={key:3,class:"",textColor:"text-white"};function ps(e,s,M,U,W,B){const v=c("Head"),y=c("ps-breadcrumb-2"),w=c("ps-label-header-5"),_=c("ps-label"),L=c("ps-dropdown-select"),P=c("ps-dropdown"),S=c("ps-icon"),T=c("ps-input-with-right-icon"),C=c("ps-label-caption"),I=c("ps-radio-value"),E=c("ps-input"),n=c("ps-toggle"),V=c("ps-button"),H=c("ps-loading"),j=c("ps-success-dialog"),O=c("ps-confirm-dialog"),q=c("ps-error-dialog"),N=c("language-update-modal"),z=c("ps-loading-circle-dialog"),R=c("ps-layout");return m(),b(K,null,[o(v,{title:e.$t("core__be_edit_custom_field_label")},null,8,["title"]),o(R,null,{default:a(()=>[o(y,{items:e.breadcrumb,class:"mt-4 mb-7"},null,8,["items"]),l("div",Fe,[e.selectedClientTable.core_key_type_id==1?(m(),b("div",Le,[o(w,{textColor:" text-secondary-800 dark:text-secondary-100"},{default:a(()=>[d(r(e.$t("core__be_choose_category_for_custom_field"))+" ",1),Te]),_:1}),l("div",Ee,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core__category_label")),1)]),_:1}),o(P,{disabled:!0,align:"left",class:"col-span-2 w-full"},{select:a(()=>{var t;return[o(L,{disabled:!0,placeholder:e.$t("core_be_select_category"),selectedValue:e.form.category_id==""?e.$t("core__be_general_for_all_category"):(t=e.categories.filter(D=>D.id===e.form.category_id)[0])==null?void 0:t.name},null,8,["placeholder","selectedValue"])]}),list:a(()=>[l("div",Ve,[l("div",De,[l("div",{class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[0]||(s[0]=t=>[e.form.category_id=""])},[o(_,{class:"ms-2"},{default:a(()=>[d(r(e.$t("core__be_general_for_all_category")),1)]),_:1})]),(m(!0),b(K,null,A(e.categories,t=>(m(),b("div",{key:t.id,class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:D=>[e.form.category_id=t.id]},[o(_,{class:G(["ms-2",t.id==e.form.category_id?" font-bold":""])},{default:a(()=>[d(r(t.name),1)]),_:2},1032,["class"])],8,Me))),128))])])]),_:1})])])):g("",!0),e.selectedClientTable.core_key_type_id==1?(m(),$(_,{key:1,class:"px-6 mt-4 text-sm md:text-base"},{default:a(()=>[Ne,d(r(e.$t("core__be_choose_category_for_custom_field_desc"))+" ",1),Ue]),_:1})):g("",!0),l("div",Be,[l("div",null,[l("div",He,[o(w,{textColor:"py-4 ps-6 pe-6 md:ps-8 md:pe-24 text-secondary-800 dark:text-secondary-100"},{default:a(()=>[d(r(e.$t("core_be_field_configuration"))+" ",1),je]),_:1}),Oe,l("div",qe,[l("div",ze,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core_custom__name_label")),1),Re]),_:1}),l("div",Ke,[o(T,{class:"w-full text-base",disabled:!0,value:e.nameString,"onUpdate:value":s[2]||(s[2]=t=>e.nameString=t),placeholder:e.$t("core_custom__name_placeholder")},{icon:a(()=>[o(S,{class:"cursor-pointer",onClick:s[1]||(s[1]=t=>e.nameLanguageClicked(e.form.name)),name:"editPencil"})]),_:1},8,["value","placeholder"])]),e.validiteName?(m(),$(C,{key:0,textColor:"text-red-500 ",class:"col-span-3 mt-2 block"},{default:a(()=>[d(r(e.$t("core__be_name_required")),1)]),_:1})):g("",!0)]),l("div",We,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core_custom__placeholder_label")),1),Ze]),_:1}),l("div",Ae,[o(T,{class:"w-full text-base",disabled:!0,value:e.placeholderString,"onUpdate:value":s[4]||(s[4]=t=>e.placeholderString=t),placeholder:e.$t("core_custom__placeholder_placeholder")},{icon:a(()=>[o(S,{class:"cursor-pointer",onClick:s[3]||(s[3]=t=>e.placeholderLanguageClicked(e.form.placeholder)),name:"editPencil"})]),_:1},8,["value","placeholder"])]),e.validitePlaceholder?(m(),$(C,{key:0,textColor:"text-red-500 ",class:"col-span-3 mt-2 block"},{default:a(()=>[d(r(e.$t("core__be_placeholder_required")),1)]),_:1})):g("",!0)]),l("div",Ge,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core_custom__ui_type_label")),1),Je]),_:1}),o(P,{disabled:!0,align:"left",class:"col-span-2 w-full"},{select:a(()=>[o(L,{disabled:!0,placeholder:e.$t("core_custom__select_ui_type_label"),selectedValue:e.form.ui_type_id==""?"":e.uiTypes.filter(t=>t.core_keys_id===e.form.ui_type_id)[0].name,onChange:s[5]||(s[5]=t=>e.validateEmptyInput("ui_type_id",e.form.ui_type_id)),onBlur:s[6]||(s[6]=t=>e.validateEmptyInput("ui_type_id",e.form.ui_type_id))},null,8,["placeholder","selectedValue"])]),list:a(()=>[l("div",Qe,[l("div",Xe,[l("div",{class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[7]||(s[7]=t=>[e.form.ui_type_id="",e.validateEmptyInput("ui_type_id",e.form.ui_type_id)])},[o(_,{class:"text-gray-200"},{default:a(()=>[d(r(e.$t("core_custom__select_ui_type_label")),1)]),_:1})]),(m(!0),b(K,null,A(e.uiTypes,t=>(m(),b("div",{key:t.core_keys_id,class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:D=>[e.validiteUIType=!1,e.form.ui_type_id=t.core_keys_id,e.validateEmptyInput("ui_type_id",e.form.ui_type_id)]},[o(_,{class:G(["ms-2",t.core_keys_id==e.form.ui_type_id?" font-bold":""])},{default:a(()=>[d(r(t.name),1)]),_:2},1032,["class"])],8,Ye))),128))])])]),_:1}),e.validiteUIType?(m(),$(C,{key:0,textColor:"text-red-500 ",class:"col-span-3 mt-2 block"},{default:a(()=>[d(r(e.$t("core__be_ui_type_is_required")),1)]),_:1})):g("",!0)]),l("div",xe,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core__custom_type_of_conditions_label")),1),es]),_:1}),o(I,{class:"",value:e.form.mandatory,"onUpdate:value":s[8]||(s[8]=t=>e.form.mandatory=t),title:"1",title_label:e.$t("core__custom_mandatory_label"),disabled:e.clientCustomField.permission_for_mandatory=="0"},null,8,["value","title_label","disabled"]),o(I,{value:e.form.mandatory,"onUpdate:value":s[9]||(s[9]=t=>e.form.mandatory=t),title:"0",title_label:e.$t("core__custom_optional_label"),disabled:e.clientCustomField.permission_for_mandatory=="0"},null,8,["value","title_label","disabled"])]),l("div",ss,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core__custom_column_order_label")),1),os]),_:1}),o(E,{class:"col-span-2",type:"number",value:e.form.ordering,"onUpdate:value":s[10]||(s[10]=t=>e.form.ordering=t),valueModifiers:{number:!0},placeholder:e.$t("column_order_placeholder"),onKeypress:s[11]||(s[11]=t=>e.validateNumber(t))},null,8,["value","placeholder"]),e.validiteOrdering?(m(),$(C,{key:0,textColor:"text-red-500 ",class:"col-span-3 mt-2 block"},{default:a(()=>[d(r(e.$t("core__be_ordering_required")),1)]),_:1})):g("",!0)])])]),l("div",ts,[o(w,{textColor:"py-4 ps-6 pe-6 md:ps-8 md:pe-24 text-secondary-800 dark:text-secondary-100"},{default:a(()=>[d(r(e.$t("core__custom_display_setting_label"))+" ",1),ls]),_:1}),as,l("div",is,[l("div",rs,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core__custom_enable_sorting_this_field")),1)]),_:1}),o(n,{selectedValue:e.form.is_show_sorting==1,onClick:s[12]||(s[12]=t=>e.handleIsShowSorting()),toggleOnTheme:"bg-primary-500 border-primary-500 "},null,8,["selectedValue"])]),l("div",ns,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core__custom_enable_shown_in_table_for_field_label")),1)]),_:1}),o(n,{selectedValue:e.form.is_include_in_hideshow==1,onClick:s[13]||(s[13]=t=>e.handleEnableFilter()),toggleOnTheme:"bg-primary-500 border-primary-500 "},null,8,["selectedValue"])]),e.form.is_include_in_hideshow?(m(),b("div",ds,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core__custom_enable_shown_in_table_label")),1)]),_:1}),o(n,{selectedValue:e.form.is_show==1,disabled:e.form.is_include_in_hideshow==0,onClick:s[14]||(s[14]=t=>e.handleHideShow()),toggleOnTheme:"bg-primary-500 border-primary-500 "},null,8,["selectedValue","disabled"])])):g("",!0),e.form.is_include_in_hideshow?(m(),b("div",_s,[o(_,{class:"text-base"},{default:a(()=>[d(r(e.$t("core__custom_is_show_in_filter_label")),1)]),_:1}),o(n,{selectedValue:e.form.is_show_in_filter==1,disabled:e.form.is_include_in_hideshow==0,onClick:s[15]||(s[15]=t=>e.handleIsShowInFilter()),toggleOnTheme:"bg-primary-500 border-primary-500 "},null,8,["selectedValue","disabled"])])):g("",!0)])]),l("div",us,[o(V,{onClick:s[16]||(s[16]=t=>e.handleCancel()),textSize:"text-base",type:"reset",class:"me-4",colors:"text-primary-500",focus:"",hover:""},{default:a(()=>[d(r(e.$t("core__be_btn_cancel")),1)]),_:1}),o(V,{onClick:s[17]||(s[17]=t=>e.handleSubmit()),class:"transition-all duration-300 min-w-3xs",padding:"px-8.5 py-2.5",rounded:"rounded",hover:"",focus:""},{default:a(()=>[e.loading?(m(),$(H,{key:0,theme:"me-2 border-2 border-t-2 border-text-8 border-t-primary-500",loadingSize:"h-5 w-5"})):g("",!0),e.success?(m(),$(S,{key:1,name:"check",class:"me-1.5 transition-all duration-300"})):g("",!0),e.success?(m(),b("span",cs,r(e.$t("core__be_btn_saved")),1)):g("",!0),!e.loading&&!e.success?(m(),b("span",ms,r(e.$t("core__be_btn_save")),1)):g("",!0)]),_:1})])])])]),o(j,{ref:"ps_success_dialog"},null,512),o(O,{ref:"ps_confirm_dialog"},null,512),o(q,{ref:"ps_error_dialog"},null,512),o(N,{ref:"language_update_modal_name"},null,512),o(N,{ref:"language_update_modal_placeholder"},null,512),o(z,{ref:"ps_loading_circle_dialog"},null,512)]),_:1})],64)}var Xs=Se(Ie,[["render",ps]]);export{Xs as default};
