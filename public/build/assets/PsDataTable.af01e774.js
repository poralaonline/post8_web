import{P as A}from"./PsLabel.06b4363b.js";import{P as I}from"./PsIcon.1e42bf4c.js";import{c as N}from"./PsDangerDialog.1643aeb7.js";import{a as V,P as E}from"./PsTableSearch.3fb07b86.js";import{P as z}from"./PsDropdown.0c78da9b.js";import{P as H}from"./PsDropdownSelect.13d0e05f.js";import{P as U}from"./PsInputWithRightIcon.8c9e6c80.js";import{h as j}from"./moment.9709ab41.js";import{o as l,c as r,f as b,w as o,l as M,F as k,s as D,b as f,a as p,q as c,t as y,g as w,m as C,v as x,n as q,r as P}from"./app.d57d51e9.js";import{P as R}from"./ps_constants.115f3686.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";const W={name:"PsDataTable",components:{PsLabel:A,PsIcon:I,PsTextButton:N,PsTableSearch:V,PsPagination:E,PsDropdown:z,PsDropdownSelect:H,PsInputWithRightIcon:U},props:{margin:{type:String,default:"mt-6 sm:mt-8 lg:mt-10"},columns:{type:Array,default:[]},rows:{type:Array,default:[]},perPageOptions:{type:Array,default:[10,25,50,100]},sortable:{type:Boolean,default:!0},colFilterOptions:{type:Array,default:[]},searchable:{type:Boolean,default:!1},searchRightable:{type:Boolean,default:!1},searchOptions:{type:Array,default:[]},globalSearchFields:{type:Array,default:[]},globalSearchPlaceholder:{type:String,default:"Search"},searchHide:{type:Boolean,default:!1},searchRightHide:{type:Boolean,default:!1},thumb1xUrl:{type:String,default:""},selectedPriceType:{type:String,default:R.NORMAL_PRICE}},setup(s){function u(i){if(s.selectedPriceType==R.PRICE_RANGE){const d=parseFloat(i),t=parseInt(d);return t>5?"$".repeat(5):t<1?"$".repeat(1):"$".repeat(t)}if(s.selectedPriceType==R.NORMAL_PRICE||s.selectedPriceType==R.NO_PRICE)return i}return{checkPriceFormat:u}},data(){return{searchterm:"",selectedValue:0,searchedData:{},filterOptions:this.searchOptions,sortedData:{},tableData:this.rows,globalSearch:this.globalSearchFields,pagination:{page:1,perPage:this.perPageOptions[0]},totalRecords:this.rows.length,moment:j,clearFilter:!1,sortType:"desc"}},computed:{filteredList(){if(this.clearFilter==!0&&(this.searchedData={}),this.tableData=this.rows,this.searchterm&&(this.tableData=this.tableData.filter(i=>{let d=!1;for(let t=0;t<this.globalSearch.length;t++)if(i[this.globalSearch[t]].toLowerCase().replace(/\s+/g," ").trim().includes(this.searchterm.toLowerCase().replace(/\s+/g," ").trim())){d=!0;break}else d=!1;return!!d})),this.searchedData)for(let i of this.searchOptions)i.filterType=="dropdown"&&i.checkFieldMain in this.searchedData&&i.checkFieldMain!=""&&i.checkFieldMain!=0&&this.searchedData[i.checkFieldMain]!=""&&this.searchedData[i.checkFieldMain]!=0&&(this.tableData=this.tableData.filter(d=>d[i.checkFieldMain]==this.searchedData[i.checkFieldMain]));if(this.sortable==!0&&this.sortedData!=null){let i=this.columns.length;for(let d=i-1;d>=0;d--){let t=this.columns[d];t.field in this.sortedData&&(this.sortedData[t.field].type=="String"&&("relation"in t?this.tableData=this.tableData.sort((_,g)=>{let n=_[t.relation][t.relationField].toLowerCase(),F=g[t.relation][t.relationField].toLowerCase();return n<F?-1:n>F?1:0}):this.tableData=this.tableData.sort((_,g)=>{let n=_[t.field].toLowerCase(),F=g[t.field].toLowerCase();return n<F?-1:n>F?1:0}),this.sortedData[t.field].orderBy=="desc"&&(this.tableData=this.tableData.reverse())),(this.sortedData[t.field].type=="Integer"||this.sortedData[t.field].type=="Boolean")&&(this.tableData=this.tableData.sort((_,g)=>_[t.field]-g[t.field]),this.sortedData[t.field].orderBy=="desc"&&(this.tableData=this.tableData.reverse())),this.sortedData[t.field].type=="Date"&&(this.tableData=this.tableData.sort((_,g)=>new Date(_[t.field]).getTime()-new Date(g[t.field]).getTime()),this.sortType=="desc"&&(this.tableData=this.tableData.reverse())))}}this.totalRecords=this.tableData.length;const s=(this.pagination.page-1)*this.pagination.perPage,u=this.pagination.page*this.pagination.perPage;return this.tableData.slice(s,u)}},methods:{handleSorting(s){let u={},i=s.field,d=s.type;this.sortedData==null?u={orderBy:"asc",type:d}:i in this.sortedData?this.sortedData[i].orderBy=="asc"?u={orderBy:"desc",type:d}:u={orderBy:"asc",type:d}:u={orderBy:"asc",type:d},this.sortedData={},this.sortedData[i]=u}}},J={class:"rounded-md shadow-xs w-56"},K={class:"pt-2 z-30"},Q={key:0},X=c("No data yet!"),Y={key:1},Z=["onClick"],O=["onClick"],$={class:"grid grid-cols-4 gap-2 mt-4"},ee={class:"rounded-md shadow-xs w-56"},te={class:"pt-2 z-30"},ie={key:0},ae=c("No data yet!"),le={key:1},se=["onClick"],re=["onClick"],oe={class:"overflow-x-auto"},ne={class:"bg-primary-500 text-white dark:text-black text-2xl justify-content"},de=c("Action"),ce=c("No"),he={class:"bg-white divide-y divide-gray-200 dark:bg-secondaryDark-black dark:divide-white border-b border-t"},fe={class:"py-2 ps-4"},pe={key:0},ue={class:"pb-2 pt-4 px-4 text-sm font-medium whitespace-nowrap dark:text-slate-500 text-slate-400 text-center border-b border-t",colspan:"20"};function ye(s,u,i,d,t,_){const g=P("ps-dropdown-select"),n=P("ps-label"),F=P("ps-dropdown"),S=P("ps-icon"),B=P("ps-input-with-right-icon"),T=P("ps-table-search"),L=P("ps-pagination");return l(),r(k,null,[i.searchHide?w("",!0):(l(),b(T,{key:0,perPageOptions:i.perPageOptions,colFilterOptions:i.colFilterOptions},{searchLeft:o(()=>[M(s.$slots,"searchLeft")]),searchRight:o(()=>[M(s.$slots,"searchRight"),i.searchRightable?(l(!0),r(k,{key:0},D(i.searchOptions,(e,h)=>(l(),r("div",{key:h},[e.filterType=="dropdown"?(l(),b(F,{key:0,align:"left",class:"w-56 h-10"},{select:o(()=>[f(g,{placeholder:e.placeholder,showCenter:!0,selectedValue:e.checkFieldMain in t.searchedData&&t.searchedData[e.checkFieldMain]!=""?e.options.filter(a=>a[e.checkFieldOption]==t.searchedData[e.checkFieldMain])[0][e.displayField]:""},null,8,["placeholder","selectedValue"])]),list:o(()=>[p("div",J,[p("div",K,[e.options.length==null?(l(),r("div",Q,[f(n,{class:"p-2 flex"},{default:o(()=>[X]),_:1})])):(l(),r("div",Y,[p("div",{onClick:a=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]="","sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?s.subOptions[e.sub_options.options]={}:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[f(n,null,{default:o(()=>[c(y(s.$t("core__be_all")),1)]),_:1})],8,Z),(l(!0),r(k,null,D(e.options,(a,v)=>(l(),r("div",{key:v,onClick:m=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]=a[e.checkFieldOption],"sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?s.subOptions[e.sub_options.options]=a[e.sub_options.options]:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[f(n,null,{default:o(()=>[c(y(a[e.displayField]),1)]),_:2},1024)],8,O))),128))]))])])]),_:2},1024)):w("",!0)]))),128)):w("",!0),f(B,{class:"w-60 h-10 rounded-full flex",value:t.searchterm,"onUpdate:value":u[0]||(u[0]=e=>t.searchterm=e),placeholder:i.globalSearchPlaceholder},{icon:o(()=>[f(S,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])]),searchOption:o(()=>[C(p("div",$,[(l(!0),r(k,null,D(i.searchOptions,(e,h)=>(l(),r("div",{key:h},[e.filterType=="dropdown"?(l(),b(F,{key:0,align:"left",class:"w-full"},{select:o(()=>[f(g,{placeholder:e.placeholder,showCenter:!0,selectedValue:e.checkFieldMain in t.searchedData&&t.searchedData[e.checkFieldMain]!=""?e.options.filter(a=>a[e.checkFieldOption]==t.searchedData[e.checkFieldMain])[0][e.displayField]:""},null,8,["placeholder","selectedValue"])]),list:o(()=>[p("div",ee,[p("div",te,[e.options.length==null?(l(),r("div",ie,[f(n,{class:"p-2 flex"},{default:o(()=>[ae]),_:1})])):(l(),r("div",le,[p("div",{onClick:a=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]="","sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?s.subOptions[e.sub_options.options]={}:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[f(n,null,{default:o(()=>[c(y(s.$t("core__be_all")),1)]),_:1})],8,se),(l(!0),r(k,null,D(e.options,(a,v)=>(l(),r("div",{key:v,onClick:m=>[t.clearFilter=!1,t.searchedData[e.checkFieldMain]=a[e.checkFieldOption],"sub_options"in e?t.searchedData[e.sub_options.checkFieldMain]="":"","sub_options"in e?s.subOptions[e.sub_options.options]=a[e.sub_options.options]:""],class:"w-56 flex py-4 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[f(n,null,{default:o(()=>[c(y(a[e.displayField]),1)]),_:2},1024)],8,re))),128))]))])])]),_:2},1024)):w("",!0)]))),128))],512),[[x,i.searchable]])]),_:3},8,["perPageOptions","colFilterOptions"])),p("div",oe,[p("table",{class:q(["table-auto w-full",i.margin])},[p("thead",ne,[p("tr",null,[(l(!0),r(k,null,D(i.columns.filter(e=>e.field=="action"),e=>C((l(),r("th",{key:e.field},[f(n,{textColor:"flex text-secondary-50 dark:text-secondary-900 font-semibold my-2 ms-6"},{default:o(()=>[de]),_:1})])),[[x,i.colFilterOptions.filter(h=>h.key==e.field).length==0?!0:!i.colFilterOptions.filter(h=>h.key==e.field)[0].hidden]])),128)),p("th",null,[f(n,{textColor:"flex text-secondary-50 dark:text-secondary-900 font-semibold my-2 ms-3"},{default:o(()=>[ce]),_:1})]),(l(!0),r(k,null,D(i.columns.filter(e=>e.field!="action"),e=>C((l(),r("th",{key:e.field},[e.field!="action"?(l(),b(n,{key:0,textColor:"flex text-secondary-50 dark:text-secondary-900 font-semibold my-2 ms-3 items-center"},{default:o(()=>[c(y(s.$t(e.label))+" ",1),e.action=="Action"?(l(),b(S,{key:0,onClick:h=>_.handleSorting(e),name:e.field in t.sortedData&&t.sortedData[e.field].orderBy=="asc"?"upChervon":"downChervon",class:"ms-2",w:"16",h:"16"},null,8,["onClick","name"])):w("",!0)]),_:2},1024)):w("",!0)])),[[x,i.colFilterOptions.filter(h=>h.key==e.field).length==0?!0:!i.colFilterOptions.filter(h=>h.key==e.field)[0].hidden]])),128))])]),p("tbody",he,[(l(!0),r(k,null,D(_.filteredList,(e,h)=>(l(),r("tr",{class:"hover:bg-gray-100 dark:hover:bg-gray-700",key:h},[(l(!0),r(k,null,D(i.columns.filter(a=>a.field=="action"),(a,v)=>C((l(),r("td",{key:v,class:"py-2 ps-4"},[M(s.$slots,"tableActionRow",{field:a.field,row:e},()=>[f(n,{class:"font-normal"},{default:o(()=>[c(y(s.$t(e[a.field])),1)]),_:2},1024)])])),[[x,i.colFilterOptions.filter(m=>m.key==a.field).length==0?!0:!i.colFilterOptions.filter(m=>m.key==a.field)[0].hidden]])),128)),p("td",fe,[f(n,null,{default:o(()=>[c(y(h+1+t.pagination.perPage*(t.pagination.page-1)),1)]),_:2},1024)]),(l(!0),r(k,null,D(i.columns.filter(a=>a.field!="action"),(a,v)=>C((l(),r("td",{key:v,class:"py-2 ps-4"},[M(s.$slots,"tableRow",{field:a.field,row:e},()=>["relation"in a?(l(),b(n,{key:0},{default:o(()=>[c(y(e[a.relation]?e[a.relation][a.relationField]:""),1)]),_:2},1024)):a.type=="Date"?(l(),b(n,{key:1},{default:o(()=>[c(y(e[a.field]?t.moment(e[a.field]).format(s.$page.props.dateFormat):""),1)]),_:2},1024)):a.type=="Image"?(l(),b(n,{key:2})):a.field=="price"?(l(),b(n,{key:3},{default:o(()=>[c(y(d.checkPriceFormat(e[a.field])),1)]),_:2},1024)):a.field=="original_price"?(l(),b(n,{key:4},{default:o(()=>[c(y(d.checkPriceFormat(e[a.field])),1)]),_:2},1024)):(l(),b(n,{key:5,class:"font-normal"},{default:o(()=>[c(y(s.$t(e[a.field])),1)]),_:2},1024))])])),[[x,i.colFilterOptions.filter(m=>m.key==a.field).length==0?!0:!i.colFilterOptions.filter(m=>m.key==a.field)[0].hidden]])),128))]))),128)),_.filteredList.length==0?(l(),r("tr",pe,[p("td",ue,[M(s.$slots,"emptyRow",{},()=>[c(y(s.$t("core__be_table_no_data")),1)])])])):w("",!0)])],2)]),C(f(L,{value:t.pagination,"onUpdate:value":u[1]||(u[1]=e=>t.pagination=e),totalRecords:t.totalRecords,perPageOptions:i.perPageOptions},null,8,["value","totalRecords","perPageOptions"]),[[x,i.rows.length>i.perPageOptions[0]]])],64)}var xe=G(W,[["render",ye]]);export{xe as P};
