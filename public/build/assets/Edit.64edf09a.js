import{d as z,Z as L,H as U,i as g,y as M,I,B as u,o as v,c as f,b as r,w as t,q as s,t as i,g as w,a as S,F as H,s as E,f as T,r as d}from"./app.d57d51e9.js";import q from"./PsVendorLayout.91533ecb.js";import{P as J}from"./PsBreadcrumb2.761286c6.js";import{P as Z}from"./PsDangerDialog.1643aeb7.js";import{P as A}from"./PsButton.c9fc3d7e.js";import G from"./VendorDetailVendorInfo.8207f832.js";import K from"./VendorDetailSubscriptionNotification.0c258c0a.js";import Q from"./VendorDetailStoreBranches.44cd544c.js";import{P as R}from"./PsLabel.06b4363b.js";import{P as W}from"./PsLoadingCircleDialog.c95deca1.js";import{P as X}from"./PsSuccessDialog.a19b3bb4.js";import{P as Y}from"./PsIcon.1e42bf4c.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import"./TitleBar.ce0e8418.js";import"./PsDropdown.0c78da9b.js";import"./PsDropdownSelect.13d0e05f.js";import"./PsToggle.fddd5498.js";import"./toggle.6b621a64.js";import"./PsWarningDialog.67ba6cb5.js";import"./PsModal.f198af2b.js";import"./vue-neat-modal.d9ed1877.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./Icons.ebbb778b.js";import"./SidebarMenu.51fb1869.js";import"./SidebarMenuItem.66190284.js";import"./SidebarSubTab.148b6988.js";import"./PsErrorDialog.a25aef9e.js";import"./PsInputWithRightIcon.8c9e6c80.js";import"./PsIcon1.c6e725b1.js";import"./PsInput.b3485f1e.js";import"./PsTextarea.2d2fbd18.js";import"./PsImageUpload2.bbe6dfa3.js";import"./DatePicker.2eba1133.js";import"./main.f21f1fe5.js";import"./index.edd1d404.js";import"./CheckBox.f4553fc0.js";import"./PsRadioValue.d4f130b1.js";import"./PsLabelCaption.b0af0e56.js";import"./psApiService.cef39261.js";import"./moment.9709ab41.js";import"./PsImageUpload.e74e4503.js";import"./PsLabelTitle3.78de00b9.js";import"./PsDraggable.aca5d6c1.js";import"./PsLoading.1f212adc.js";const oe=z({name:"Index",components:{Head:L,PsBreadcrumb2:J,PsLabelHeader6:Z,PsButton:A,VendorDetailVendorInfo:G,VendorDetailStoreBranches:Q,VendorDetailSubscriptionNotification:K,PsLabel:R,PsSuccessDialog:X,PsLoadingCircleDialog:W,PsIcon:Y},layout:q,props:{storeCan:Object,errors:Object,vendor:Object,coreFieldFilterSettings:Object,branchesCoreFieldFilterSettings:Object,customizeHeaders:Object,customizeDetails:Object,validation:Object,authUser:Object},setup(e){var h,x,k;console.log(e.vendor);let o=U({id:e.vendor.id,name:e.vendor.name,email:e.vendor.email,phone:e.vendor.phone,address:e.vendor.address,description:e.vendor.description,website:e.vendor.website,facebook:e.vendor.facebook,instagram:e.vendor.instagram,logo:(h=e.vendor.logo)==null?void 0:h.img_path,banner_1:(x=e.vendor.banner_1)==null?void 0:x.img_path,banner_2:(k=e.vendor.banner_2)==null?void 0:k.img_path,vendor_relation:{},vendorBranches:e.vendor.vendorBranches,_method:"put"});const n=g(0),c=g(!0),P=g(!0),m=M({data:[]}),p=g(),y=g(),a={id:"",vendor_id:"",name:"",email:"",phone:"",address:"",description:"",added_user_id:"",added_date_str:"",is_empty_object:1};I(()=>e.vendor,(b,l)=>{var B,j,D;c.value=!1,_(),o.name=e.vendor.name,o.id=e.vendor.id,o.phone=e.vendor.phone,o.address=e.vendor.address,o.description=e.vendor.description,o.website=e.vendor.website,o.facebook=e.vendor.facebook,o.instagram=e.vendor.instagram,o.logo=(B=e.vendor.logo)==null?void 0:B.img_path,o.banner_1=(j=e.vendor.banner_1)==null?void 0:j.img_path,o.banner_2=(D=e.vendor.banner_2)==null?void 0:D.img_path,setTimeout(()=>{c.value=!0},200),e.customizeHeaders.map((O,ce)=>{e.vendor.vendor_relation.map(N=>{if(O.core_keys_id===N.core_keys_id){let V=N.value;o.vendor_relation[O.core_keys_id]=V==="1"?!0:V==="0"?!1:V}})})}),_();function _(){e.vendor.vendorBranches.length==1&&e.vendor.vendorBranches[0].is_empty_object=="1"?(n.value=0,m.data=[],o.vendorBranches=[]):(n.value=e.vendor.vendorBranches.length,m.data=e.vendor.vendorBranches,o.vendorBranches=e.vendor.vendorBranches)}function C(b){n.value=n.value-1,m.data.splice(b,1)}function $(){n.value=n.value+1,m.data.push(JSON.parse(JSON.stringify(a)))}function F(b){o.vendorBranches=m.data,this.$inertia.post(route("vendor_info.update",b),o,{forceFormData:!0,onBefore:()=>{p.value.openModal(u("core_vendor__update_vendor_title"),u("core_vendor__update_vendor_note"))},onSuccess:()=>{p.value.closeModal(),y.value.openModal(u("core_vendor__update_vendor_success"),u("core_vendor__update_vendor_success_message"),u("core__vendor_btn_ok"),()=>{},!1)},onError:()=>{p.value.closeModal()}})}return{form:o,showNoti:P,vendorShow:n,removeVendorBranch:C,addVendorBranch:$,vendorStatus:c,vendorList:m,handleSubmit:F,ps_loading_circle_dialog:p,ps_success_dialog:y}},computed:{breadcrumb(){return[{label:u("core__vendor_my_store_module")},{label:u("core_vendor__edit_vendor_info"),color:"text-primary-500"}]}},methods:{handleCancel(){this.$inertia.get(route("vendor_info.index"))}},created(){this.customizeHeaders.map((e,o)=>{this.vendor.vendor_relation.map(n=>{if(e.core_keys_id===n.core_keys_id){let c=n.value;this.form.vendor_relation[e.core_keys_id]=c==="1"?!0:c==="0"?!1:c}})})}}),re={key:0,class:"flex justify-between gap-6 items-start bg-red-50 p-6 rounded border-l-4 border-red-500 mb-5 sm:mb-6 lg:mb-8"},te={class:"rounded-md border border-secondary-200 px-6 py-8 mb-8"},ne={key:1,class:"rounded-md border border-secondary-200 px-6 py-8 mb-8"},ae={class:"mt-6"},de={class:"flex flex-row justify-end space-x-4"},se={key:2,class:"flex"},ie={class:"mb-2.5 flex flex-row justify-end"};function le(e,o,n,c,P,m){const p=d("Head"),y=d("ps-breadcrumb-2"),a=d("ps-label"),_=d("ps-icon"),C=d("vendor-detail-subscription-notification"),$=d("vendor-detail-vendor-info"),F=d("vendor-detail-store-branches"),h=d("ps-button"),x=d("ps-loading-circle-dialog"),k=d("ps-success-dialog"),b=d("ps-layout");return v(),f(H,null,[r(p,{title:e.$t("core__vendor_my_store_module")},null,8,["title"]),r(b,null,{default:t(()=>[r(y,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),e.showNoti?(v(),f("div",re,[r(a,{textColor:"text-secondary-500"},{default:t(()=>[s(i(e.$t("core_vendor__item_quantity_noti")),1)]),_:1}),r(a,{textColor:"leading-5 text-sm text-secondary-400 flex items-center gap-2 cursor-pointer",onClick:o[0]||(o[0]=l=>e.showNoti=!1)},{default:t(()=>[r(_,{name:"close-fill",w:"16",h:"16",viewBox:"0 0 16 16"}),s(" "+i(e.$t("core_be__dismiss")),1)]),_:1})])):w("",!0),r(C,{expiredStatus:e.vendor.expire_status,expiredDate:e.vendor.expired_date},null,8,["expiredStatus","expiredDate"]),r(a,{class:"mb-8 text-xl lg:text-3xl font-semibold"},{default:t(()=>[s(i(e.$t("core_vendor__vendor_info")),1)]),_:1}),S("div",te,[r(a,{class:"text-xl lg:text-2xl font-semibold"},{default:t(()=>[s(i(e.$t("core_vendor__basic_info")),1)]),_:1}),r($,{class:"mt-8",validation:e.validation,errors:e.errors,form:e.form,coreFieldFilterSettings:e.coreFieldFilterSettings,customizeHeaders:e.customizeHeaders,authUser:e.authUser,customizeDetails:e.customizeDetails},null,8,["validation","errors","form","coreFieldFilterSettings","customizeHeaders","authUser","customizeDetails"])]),e.vendorStatus&&e.vendorShow>0?(v(),f("div",ne,[r(a,{class:"text-xl lg:text-2xl font-semibold flex flex-col space-y-8"},{default:t(()=>[s(i(e.$t("core_vendor__vendor_branches")),1)]),_:1}),(v(!0),f(H,null,E(e.vendorShow,l=>(v(),f("div",{key:l},[r(F,{class:"mt-8",storeBranches:e.vendorList.data[l-1],authUser:e.authUser,coreFieldFilterSettings:e.branchesCoreFieldFilterSettings},null,8,["storeBranches","authUser","coreFieldFilterSettings"]),S("div",ae,[S("div",de,[l==e.vendorShow?(v(),T(a,{key:0,onClick:o[1]||(o[1]=B=>e.addVendorBranch()),class:"flex flex-row text-base cursor-pointer px-4 py-2 border border-primary-500 rounded text-primary-500",textColor:"text-primary-500"},{default:t(()=>[r(_,{name:"plus",class:"me-1"}),s(" "+i(e.$t("core_vendor__add_branch")),1)]),_:1})):w("",!0),r(a,{class:"flex flex-row px-4 py-2 border border-primary-500 rounded text-base cursor-pointer text-primary-500",textColor:"text-primary-500",onClick:B=>e.removeVendorBranch(l-1)},{default:t(()=>[r(_,{name:"minus",class:"me-1"}),s(" "+i(e.$t("core_vendor__remove_branch")),1)]),_:2},1032,["onClick"])])])]))),128))])):w("",!0),e.vendorShow==0?(v(),f("div",se,[r(a,{onClick:o[2]||(o[2]=l=>e.addVendorBranch()),class:"flex flex-row mb-8 text-base cursor-pointer px-4 py-2 border border-primary-500 rounded text-primary-500",textColor:"text-primary-500"},{default:t(()=>[r(_,{name:"plus",class:"me-1"}),s(" "+i(e.$t("core_vendor__add_branch")),1)]),_:1})])):w("",!0),S("div",ie,[r(h,{onClick:o[3]||(o[3]=l=>e.handleCancel()),type:"reset",class:"me-4",colors:"text-primary-500",hover:""},{default:t(()=>[s(i(e.$t("core__vendor_btn_cancel")),1)]),_:1}),r(h,{disabled:!e.storeCan.updateMyVendor,onClick:o[4]||(o[4]=l=>e.handleSubmit(e.vendor.id)),class:"transition-all duration-300 min-w-3xs",padding:"px-7 py-2",rounded:"rounded",hover:"",focus:""},{default:t(()=>[r(a,{textColor:"text-white dark:text-secondaryDark-black"},{default:t(()=>[s(i(e.$t("core__vendor_btn_update")),1)]),_:1})]),_:1},8,["disabled"])]),r(x,{ref:"ps_loading_circle_dialog"},null,512),r(k,{ref:"ps_success_dialog"},null,512)]),_:1})],64)}var ro=ee(oe,[["render",le]]);export{ro as default};
