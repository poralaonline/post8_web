import{P as _e}from"./PsLayout.bc5965d6.js";import{d as fe,Z as he,i as a,B as g,I as be,O as Z,o as n,c as u,b as i,w as o,a as p,q as c,t as d,f as T,g as b,F as j,s as N,n as R,r as y}from"./app.d57d51e9.js";import{P as ge}from"./PsButton.c9fc3d7e.js";import{c as ye,d as ve}from"./PsDangerDialog.1643aeb7.js";import{P as ke}from"./PsBannerIcon.0cb3925c.js";import{P as Oe}from"./PsBreadcrumb2.761286c6.js";import{P as we}from"./PsIcon.1e42bf4c.js";import{P as Ce}from"./PsDropdown.0c78da9b.js";import{P as Se}from"./PsDropdownSelect.13d0e05f.js";import{D as $e}from"./PsTableSearch.3fb07b86.js";import{P as De}from"./PsIconButton.4f6354e0.js";import{P as Pe}from"./PsLabel.06b4363b.js";import{P as Fe}from"./PsLink1.496ff966.js";import{P as Ie}from"./PsToggle.fddd5498.js";import{P as Te}from"./PsTable2.1a00358d.js";import{P as je}from"./PsBadge.03793e3e.js";import{D as Re}from"./DatePicker.2eba1133.js";import{a as Ve,h as Be,i as He,j as Ae}from"./psApiService.cef39261.js";import{_ as Ee}from"./plugin-vue_export-helper.21dcd24c.js";import{P as Ue}from"./PsInputWithRightIcon.8c9e6c80.js";import{P as q}from"./ps_constants.115f3686.js";import"./PsWarningDialog.67ba6cb5.js";import"./PsModal.f198af2b.js";import"./vue-neat-modal.d9ed1877.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.66190284.js";import"./SidebarSubTab.148b6988.js";import"./PsErrorDialog.a25aef9e.js";import"./PsSuccessDialog.a19b3bb4.js";import"./PsLoading.1f212adc.js";import"./PsInput.b3485f1e.js";import"./PsLabelCaption.b0af0e56.js";import"./PsLoadingCircleDialog.c95deca1.js";import"./PsIcon1.c6e725b1.js";import"./Icons.ebbb778b.js";import"./toggle.6b621a64.js";import"./moment.9709ab41.js";import"./main.f21f1fe5.js";import"./index.edd1d404.js";const ze=fe({name:"Index",components:{Head:he,PsButton:ge,PsTextButton:ye,PsBannerIcon:ke,PsBreadcrumb2:Oe,PsDangerDialog:ve,PsIcon:we,PsDropdown:Ce,PsDropdownSelect:Se,Dropdown:$e,PsIconButton:De,PsLabel:Pe,PsLink1:Fe,PsToggle:Ie,PsTable2:Te,PsBadge:je,DatePicker:Re,PsInputWithRightIcon:Ue},layout:_e,props:{status:Object,items:Object,categories:Object,subcategories:Object,customizeHeaders:Object,customizeDetails:Object,cities:Object,townships:Object,hideShowFieldForFilterArr:Object,showCoreAndCustomFieldArr:Object,selectedCategory:{type:String,default:""},selectedDealOption:{type:String,default:""},selectedItemType:{type:String,default:""},selectedPurchaseOption:{type:String,default:""},selectedDate:{type:String,default:""},authUser:Object,uis:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String,itmPurchasedOption:String,itmDealOption:String,itmConditionOfItem:String,itmItemType:String,selected_price_type:String},setup(e){let s=a(!1);const V=a(!0),G=e.selectedCategory||e.selectedSubcategory||e.selectedCity||e.selectedTownship?a(!0):a(!1),M=a(!1);let B=e.search?a(e.search):a(""),H=e.sort_field?a(e.sort_field):a(""),A=e.sort_order?a(e.sort_order):a("desc"),v=e.selectedCategory?a(e.selectedCategory.id):a(""),S=e.selectedDealOption?a(e.selectedDealOption.id):a(""),D=e.selectedPurchaseOption?a(e.selectedPurchaseOption.id):a(""),O=e.selectedItemType?a(e.selectedItemType.id):a(""),m=e.selectedDate?a(e.selectedDate):a(""),$=a([]),C=a(!1),I=a(),f=a(!1),P=a([]),F=a(!1),t=a(),w=a([]),E=a(!1),J=a(),U=a([]),z=a(!1),K=a();const Q=a(),L=[{label:g("core__be_buyer_name"),field:"buyer_user_id@@name",type:"String"},{label:g("core__be_seller_name"),field:"seller_user_id@@name",type:"String"},{label:g("core__be_item_name"),field:"title",type:"String"},{label:g("core__be_categories"),field:"category_id@@name",type:"String"},{label:g("core__be_offer_amount"),field:"offer_amount",type:"String"},{label:g("core__be_purchased_option"),field:e.itmPurchasedOption+"@@name",type:"String"},{label:g("core__be_item_type"),field:e.itmItemType+"@@name",type:"String"},{label:g("core__be_deal_option"),field:e.itmDealOption+"@@name",type:"String",action:"Action"},{label:g("core__be_date"),field:"added_date",type:"Timestamp"},{label:g("detail_label"),field:"detail",type:"Action"}];function X(r){H.value=r.field,A.value=r.sort_order,k()}function Y(r){if(e.selected_price_type==q.PRICE_RANGE){const l=parseFloat(r),h=parseInt(l);return h>5?"$".repeat(5):h<1?"$".repeat(1):"$".repeat(h)}if(e.selected_price_type==q.NORMAL_PRICE)return r}if(e.selected_price_type!=q.NO_PRICE){const r=L.findIndex(h=>h.field==="category_id@@name"),l={label:g("core__be_item_price"),field:"price",type:"Integer",action:"Action"};r!==-1&&L.splice(r+1,0,l)}function x(){v.value="all",O.value="all",S.value="all",D.value="all",m.value="",B="",k(),V.value=!1,setTimeout(()=>{V.value=!0},100)}function ee(r){v.value=r,k(1)}function te(r){O.value=r,k(1)}function le(r){S.value=r,k(1)}function re(r){D.value=r,k(1)}function oe(r){m.value=r,k(1)}function ae(r){B.value=r,k(1)}function ie(r){k(1,r)}function k(r=null,l=null){Z.get(route("successful_deal_count_report.index"),{sort_field:H.value,sort_order:A.value,page:r!=null?r:e.items.meta.current_page,row:l!=null?l:e.items.meta.per_page,search:B.value,category_filter:v.value,item_type_filter:O.value,deal_option_filter:S.value,purchase_option_filter:D.value,date_filter:m.value},{preserveScroll:!0,preserveState:!0})}function W(r){C.value=!0,f.value=!0,Ve(r,I.value,e.authUser.id).then(l=>{l.data.length?l.data.forEach(h=>{$.value.push(h)}):C.value=!1,f.value=!1})}function se(r=null){let l=$.value?$.value.length:0;(l==0||r==!0)&&W(l)}be(I,_.debounce((r,l)=>{let h=0;$.value=[],W(h)},500));function ne(r){F.value=!0,f.value=!0,Be(r,e.authUser.id).then(l=>{l.data.length?l.data.forEach(h=>{P.value.push(h)}):F.value=!1,f.value=!1}).catch(function(l){l&&(f.value=!1,F.value=!1)})}function de(r=null){let l=P.value?P.value.length:0;(l==0||r==!0)&&ne(l)}function ce(r){E.value=!0,f.value=!0,He(r,e.authUser.id).then(l=>{l.data.length?l.data.forEach(h=>{w.value.push(h)}):E.value=!1,f.value=!1}).catch(function(l){l&&(f.value=!1,E.value=!1)})}function ue(r=null){let l=w.value?w.value.length:0;(l==0||r==!0)&&ce(l)}function pe(r){z.value=!0,f.value=!0,Ae(r,e.authUser.id).then(l=>{l.data.length?l.data.forEach(h=>{U.value.push(h)}):z.value=!1,f.value=!1}).catch(function(l){l&&(f.value=!1,z.value=!1)})}function me(r=null){let l=U.value?U.value.length:0;(l==0||r==!0)&&pe(l)}return{reRenderDate:V,showFilter:G,clearFilter:M,columns:L,colFilterOptions:Q,visible:s,handleSorting:X,handleSearchingSorting:k,handleCategoryfilter:ee,handleDealOptionFilter:le,handleItemTypeFilter:te,handlePurchaseOptionFilter:re,handleDateFilter:oe,handleClearFilter:x,handleRow:ie,handleSearching:ae,selected_cat:v,selected_item_type:O,selected_deal_option:S,selected_purchase_option:D,selected_date:m,is_loading:f,dropdownClick:se,categories:$,category_loadmore_visible:C,catSearch:I,purchaseOptions:P,purchaseOptions_loadmore_visible:F,purchaseOptionsSearch:t,purchaseOptionDropdownClick:de,dealOptions:w,dealOptions_loadmore_visible:E,dealOptionsSearch:J,dealOptionDropdownClick:ue,itemTypeOptions:U,itemTypeOptions_loadmore_visible:z,itemTypeOptionsSearch:K,itemTypeOptionDropdownClick:me,checkPriceFormat:Y}},created(){},methods:{handleDetail(e){this.$inertia.get(route("successful_deal_count_report.show",e))},FilterOptionshandle(e){Z.put(route("successful_deal_count_report.screenDisplayUiSetting.store"),{value:e,sort_field:this.sort_field,sort_order:this.sort_order,row:this.items.per_page,search:this.search.value,current_page:this.items.current_page},{preserveScroll:!0,preserveState:!0})}},computed:{breadcrumb(){return[{label:g("core__be_dashboard_label"),url:route("admin.index")},{label:g("successful_deal_count_report_module"),color:"text-primary-500"}]}}}),Ne=["href"],Le={class:"rounded-md shadow-xs w-56"},qe={class:"pt-2 z-30"},Ge=["onClick"],Me={class:"flex flex-row items-center justify-between"},We={class:"mt-1 mx-1"},Ze={class:"rounded-md shadow-xs w-56"},Je={class:"pt-2 z-30"},Ke=["onClick"],Qe={class:"flex flex-row items-center justify-between"},Xe={class:"rounded-md shadow-xs w-56"},Ye={class:"pt-2 z-30"},xe=["onClick"],et={class:"flex flex-row items-center justify-between"},tt={class:"rounded-md shadow-xs w-56"},lt={class:"pt-2 z-30"},rt=["onClick"],ot={class:"flex flex-row items-center justify-between"},at={key:0},it={key:1},st={key:2},nt={key:3,class:"flex flex-row mb-2"},dt={key:4};function ct(e,s,V,G,M,B){const H=y("Head"),A=y("ps-breadcrumb-2"),v=y("ps-icon"),S=y("ps-text-button"),D=y("ps-icon-button"),O=y("ps-dropdown-select"),m=y("ps-label"),$=y("ps-input-with-right-icon"),C=y("ps-dropdown"),I=y("date-picker"),f=y("ps-badge"),P=y("ps-table2"),F=y("ps-layout");return n(),u(j,null,[i(H,{title:e.$t("successful_deal_count_report_module")},null,8,["title"]),i(F,null,{default:o(()=>[i(A,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),i(P,{":row":e.row,search:e.search,object:this.items,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,globalSearchPlaceholder:e.$t("core__be_search_user_name"),onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter,eye_filter:!1},{searchLeft:o(()=>[p("a",{href:e.route("successful_deal_count_report.csv.export"),class:"font-medium transition duration-150 ease-in-out px-4 py-1.75 ms-1 rounded text-primary-500 border border-primary-500 hover:outline-none hover:ring hover:ring-blue-100 focus:outline-none focus:ring focus:ring-blue-300 opacity-100 flex items-center"},[i(v,{name:"fileUpload",class:"me-2 font-semibold"}),c(d(e.$t("core__be_export_btn")),1)],8,Ne)]),searchRight:o(()=>[e.showFilter?(n(),T(S,{key:0,onClick:s[0]||(s[0]=t=>e.handleClearFilter()),class:"flex text-sm items-center text-red-400 dark:text-red-400",padding:"py-1 px-4"},{default:o(()=>[i(v,{theme:"dark:text-red-400",name:"cross",class:"me-3"}),c(" "+d(e.$t("core__be_clear_filter")),1)]),_:1})):b("",!0),i(D,{colors:e.showFilter?"bg-primary-500 text-white dark:text-secondary-800":"",focus:"",padding:"py-1 px-4",hover:"hover:bg-primary-500 hover:text-white",border:e.showFilter?"border border-primary-500":" border border-secondary-200",leftIcon:"filter",onClick:s[1]||(s[1]=t=>e.showFilter=!e.showFilter)},{default:o(()=>[c(d(e.$t("core__be_filter")),1)]),_:1},8,["colors","border"])]),Filter:o(()=>[i(C,{onOnClick:e.dropdownClick,align:"",class:"h-10"},{select:o(()=>[i(O,{placeholder:e.$t("core__be_category"),border:e.selected_cat!==""&&e.selected_cat!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_cat==""||e.selected_cat=="all"?"":e.selectedCategory.name},null,8,["placeholder","border","selectedValue"])]),list:o(()=>[p("div",Le,[p("div",qe,[p("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[2]||(s[2]=t=>e.handleCategoryfilter("all"))},[i(m,{class:"text-gray-200 ms-2"},{default:o(()=>[c(d(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),u(j,null,N(e.categories,t=>(n(),u("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:w=>e.handleCategoryfilter(t.id)},[i(m,{class:R(["ms-2",t.id==e.selected_cat?" font-bold":""])},{default:o(()=>[c(d(t.name),1)]),_:2},1032,["class"])],8,Ge))),128))])])]),loadmore:o(()=>[e.category_loadmore_visible?(n(),u("div",{key:0,onClick:s[3]||(s[3]=t=>e.dropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[p("div",Me,[i(m,{class:"ms-2"},{default:o(()=>[c(d(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(v,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):b("",!0)]),filter:o(()=>[p("div",We,[i($,{class:"w-full h-10",rounded:"rounded-lg",value:e.catSearch,"onUpdate:value":s[4]||(s[4]=t=>e.catSearch=t),placeholder:e.$t("core__be_search")},{icon:o(()=>[i(v,{name:"search",class:"cursor-pointer"})]),_:1},8,["value","placeholder"])])]),_:1},8,["onOnClick"]),i(C,{onOnClick:e.itemTypeOptionDropdownClick,align:"",class:"h-10"},{select:o(()=>[i(O,{placeholder:e.$t("core__be_item_type"),border:e.selected_item_type!==""&&e.selected_item_type!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_item_type==""||e.selected_item_type=="all"?"":e.selectedItemType.name},null,8,["placeholder","border","selectedValue"])]),list:o(()=>[p("div",Ze,[p("div",Je,[p("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[5]||(s[5]=t=>e.handleItemTypeFilter("all"))},[i(m,{class:"text-gray-200 ms-2"},{default:o(()=>[c(d(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),u(j,null,N(e.itemTypeOptions,t=>(n(),u("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:w=>e.handleItemTypeFilter(t.id)},[i(m,{class:R(["ms-2",t.id==e.selected_item_type?" font-bold":""])},{default:o(()=>[c(d(t.name),1)]),_:2},1032,["class"])],8,Ke))),128))])])]),loadmore:o(()=>[e.itemTypeOptions_loadmore_visible?(n(),u("div",{key:0,onClick:s[6]||(s[6]=t=>e.itemTypeOptionDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[p("div",Qe,[i(m,{class:"ms-2"},{default:o(()=>[c(d(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(v,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):b("",!0)]),_:1},8,["onOnClick"]),i(C,{onOnClick:e.purchaseOptionDropdownClick,align:"",class:"h-10"},{select:o(()=>[i(O,{placeholder:e.$t("core__be_purchased_option"),border:e.selected_purchase_option!==""&&e.selected_purchase_option!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_purchase_option==""||e.selected_purchase_option=="all"?"":e.selectedPurchaseOption.name},null,8,["placeholder","border","selectedValue"])]),list:o(()=>[p("div",Xe,[p("div",Ye,[p("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[7]||(s[7]=t=>e.handlePurchaseOptionFilter("all"))},[i(m,{class:"text-gray-200 ms-2"},{default:o(()=>[c(d(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),u(j,null,N(e.purchaseOptions,t=>(n(),u("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:w=>e.handlePurchaseOptionFilter(t.id)},[i(m,{class:R(["ms-2",t.id==e.selected_purchase_option?" font-bold":""])},{default:o(()=>[c(d(t.name),1)]),_:2},1032,["class"])],8,xe))),128))])])]),loadmore:o(()=>[e.purchaseOptions_loadmore_visible?(n(),u("div",{key:0,onClick:s[8]||(s[8]=t=>e.purchaseOptionDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[p("div",et,[i(m,{class:"ms-2"},{default:o(()=>[c(d(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(v,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):b("",!0)]),_:1},8,["onOnClick"]),i(C,{onOnClick:e.dealOptionDropdownClick,align:"",class:"h-10"},{select:o(()=>[i(O,{placeholder:e.$t("core__be_deal_option"),border:e.selected_deal_option!==""&&e.selected_deal_option!=="all"?"border border-indigo-500/100":"border border-1 border-secondary-200",selectedValue:e.selected_deal_option==""||e.selected_deal_option=="all"?"":e.selectedDealOption.name},null,8,["placeholder","border","selectedValue"])]),list:o(()=>[p("div",tt,[p("div",lt,[p("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[9]||(s[9]=t=>e.handleDealOptionFilter("all"))},[i(m,{class:"text-gray-200 ms-2"},{default:o(()=>[c(d(e.$t("core__be_select_all")),1)]),_:1})]),(n(!0),u(j,null,N(e.dealOptions,t=>(n(),u("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:w=>e.handleDealOptionFilter(t.id)},[i(m,{class:R(["ms-2",t.id==e.selected_purchase_option?" font-bold":""])},{default:o(()=>[c(d(t.name),1)]),_:2},1032,["class"])],8,rt))),128))])])]),loadmore:o(()=>[e.dealOptions_loadmore_visible?(n(),u("div",{key:0,onClick:s[10]||(s[10]=t=>e.dealOptionDropdownClick(!0)),class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center"},[p("div",ot,[i(m,{class:"ms-2"},{default:o(()=>[c(d(e.is_loading?e.$t("core__be_loading"):e.$t("core__be_load_more")),1)]),_:1}),i(v,{theme:"text-black dark:text-primary-900",name:"load",w:"16",h:"16"})])])):b("",!0)]),_:1},8,["onOnClick"]),e.reRenderDate?(n(),T(I,{key:0,placeholder:e.$t("core__be_select_date"),onDatepick:e.handleDateFilter,class:R(["rounded shadow-sm pt-0.5 focus:outline-none focus:ring-1 focus:ring-primary-500",(e.selected_date==null||e.selected_date=="","w-full")]),value:e.selected_date,"onUpdate:value":s[11]||(s[11]=t=>e.selected_date=t),range:!0,inline:!1,autoApply:!1},null,8,["placeholder","onDatepick","class","value"])):b("",!0)]),tableRow:o(t=>[t.field==e.itmPurchasedOption+"@@name"?(n(),u("span",at,[t.row[e.itmPurchasedOption+"@@name"]?(n(),T(f,{key:0,theme:"text-green-600 bg-green-50",class:"m-2"},{default:o(()=>[c(d(t.row[e.itmPurchasedOption+"@@name"]),1)]),_:2},1024)):b("",!0)])):b("",!0),t.field==e.itmItemType+"@@name"?(n(),u("span",it,[t.row[e.itmItemType+"@@name"]?(n(),T(f,{key:0,theme:"text-red-600 bg-red-50",class:"m-2"},{default:o(()=>[c(d(t.row[e.itmItemType+"@@name"]),1)]),_:2},1024)):b("",!0)])):b("",!0),t.field==e.itmConditionOfItem+"@@name"?(n(),u("span",st,[t.row[e.itmConditionOfItem+"@@name"]?(n(),T(f,{key:0,theme:"text-red-600 bg-red-50",class:"m-2"},{default:o(()=>[c(d(t.row[e.itmConditionOfItem+"@@name"]),1)]),_:2},1024)):b("",!0)])):b("",!0),t.field=="detail"?(n(),u("div",nt,[i(S,{onClick:w=>e.handleDetail(t.row.id)},{default:o(()=>[c(d(e.$t("core__be_btn_detail")),1)]),_:2},1032,["onClick"])])):b("",!0),t.field=="price"?(n(),u("div",dt,d(e.checkPriceFormat(t.row.price)),1)):b("",!0)]),_:1},8,[":row","search","object","colFilterOptions","columns","sort_field","sort_order","globalSearchPlaceholder","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable"])]),_:1})],64)}var Xt=Ee(ze,[["render",ct]]);export{Xt as default};
