import{A as $,H as w}from"./index.0d7f04f4.js";import I from"./PsModal.15d0cd4c.js";import S from"./PsLabelTitle.6c83e503.js";import V from"./PsButton.38caef2b.js";import{u as z}from"./AppInfoStore.9a878473.js";import{A}from"./AppInfoParameterHolder.e24d894d.js";import{P as B}from"./PsValueStore.97ab20f6.js";import D from"./PsLabel.b794d5bb.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import{d as H,i as a,o as N,f as T,w as n,b as l,q as c,t as u,a as U,r as p}from"./app.d57d51e9.js";import"./vue-neat-modal.d9ed1877.js";import"./PsLine.257bf9fc.js";import"./PsApiService.1464e9d5.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./ps_constants.115f3686.js";const W=H({name:"MapWithPinPickerModal",components:{PsModal:I,GoogleMap:$,Marker:w,PsLabelTitle:S,PsButton:V,PsLabel:D},setup(){const e=a(),t=a(),d=a();let _;const f=a(),g=a(),o=a({position:{lat:40.876945,lng:77.387978},draggable:!0}),i=a({lat:40.876945,lng:77.387978}),k=B().getLoginUserId(),s=z(),v=new A;v.userId=k;const m=a({key:"000",center:o.value.position,zoom:15});async function M(){m.value.key=s.appInfo.data.frontendConfigSetting.mapKey}M();function h(){_(f.value,g.value),e.value.toggle(!1)}function y(r){f.value=r.latLng.lat(),g.value=r.latLng.lng()}function C(r,P,L){r!=0&&(o.value.position.lat=r),P!=0&&(o.value.position.lng=P),r!=0&&P!=0&&(m.value.center=o.value.position,i.value=o.value.position,t.value!=null&&t.value.center!=null&&(t.value.map.setCenter(t.value.map.center),d.value.marker.component.value.setPosition(o.value.position))),_=L,e.value.toggle(!0)}return{psmodal:e,updateCoordinates:y,mcenter:o,map:m,openModal:C,map_ref:t,mcenter2:i,marker:d,pickedLocation:h}}}),j={class:"flex justify-end"};function q(e,t,d,_,f,g){const o=p("ps-label-title"),i=p("ps-label"),b=p("Marker"),k=p("GoogleMap"),s=p("ps-button"),v=p("ps-modal");return N(),T(v,{ref:"psmodal",isClickOut:!0},{title:n(()=>[l(o,null,{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__item_location")),1)]),_:1}),l(i,{class:"mt-2"},{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__drag_pin")),1)]),_:1})]),body:n(()=>[l(k,{id:"map",ref:"map_ref","api-key":e.map.key,center:e.mcenter2,zoom:e.map.zoom,style:{width:"100%",height:"450px"}},{default:n(()=>[l(b,{options:e.mcenter,draggable:"false",ref:"marker",onDrag:e.updateCoordinates},null,8,["options","onDrag"])]),_:1},8,["api-key","center","zoom"])]),footer:n(()=>[U("div",j,[l(s,{onClick:e.pickedLocation},{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__pick_location")),1)]),_:1},8,["onClick"]),l(s,{onClick:t[0]||(t[0]=m=>e.psmodal.toggle(!1)),class:"ms-2",theme:"btn-second"},{default:n(()=>[c(u(e.$t("map_with_pin_picker_moadl__cancel")),1)]),_:1})])]),_:1},512)}var re=G(W,[["render",q]]);export{re as default};
