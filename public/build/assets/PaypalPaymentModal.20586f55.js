import S from"./PsModal.15d0cd4c.js";import h from"./PsButton.38caef2b.js";import{u as M}from"./TokenStore.27f92187.js";import{P as $}from"./PsValueStore.97ab20f6.js";import x from"./PsErrorDialog.01320524.js";import{d as V,i as f,o as B,c as q,b as r,w as c,a as k,q as y,t as g,F as w,B as E,r as d}from"./app.d57d51e9.js";import{d as N}from"./dropin.1dc84efe.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import"./vue-neat-modal.d9ed1877.js";import"./PsLine.257bf9fc.js";import"./PsApiService.1464e9d5.js";import"./ApiStatus.5720ba0b.js";import"./PsObject.a17ef38f.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsLabelTitle.6c83e503.js";import"./PsLabel.b794d5bb.js";const D=V({name:"PaypalPaymentModal",components:{PsModal:S,PsButton:h,PsErrorDialog:x},setup(){const o=f(),e=f(),p=M(),m=$().getLoginUserId();let s,t;function a(n){n=="yes"?s():t(),o.value.toggle(!1)}async function i(n,v){o.value.toggle(!0),s=n,t=v;const b=await p.loadToken(m),l=document.querySelector("#submit-button");N.create({authorization:b.data.message,container:"#dropin-container",paypal:{flow:"vault"}},function(j,u){l==null||l.addEventListener("click",function(){u.isPaymentMethodRequestable()&&setTimeout(function(){u.requestPaymentMethod(async function(C,_){if(console.log(_),C){e.value.openModal("",E("paypal_credit_card_modal__error_paid_ad"));return}localStorage.paymentNonce=_.nonce,a("yes")})},200)})})}return{psmodal:o,ps_error_dialog:e,openModal:i,actionClicked:a}}}),F=k("div",{id:"dropin-container"},null,-1),I={class:"flex justify-center mx-auto"};function L(o,e,p,P,m,s){const t=d("ps-button"),a=d("ps-modal"),i=d("ps-error-dialog");return B(),q(w,null,[r(a,{ref:"psmodal",line:"hidden",isClickOut:!1},{body:c(()=>[F,k("div",I,[r(t,{id:"submit-button"},{default:c(()=>[y(g(o.$t("paypal_credit_card_modal__submit_payment")),1)]),_:1}),r(t,{theme:"btn-second",class:"text-center mx-4",onClick:e[0]||(e[0]=n=>o.actionClicked("no"))},{default:c(()=>[y(g(o.$t("paypal_credit_card_modal__close")),1)]),_:1})])]),_:1},512),r(i,{ref:"ps_error_dialog"},null,512)],64)}var ao=T(D,[["render",L]]);export{ao as default};
