import{P as T}from"./PsLayout.bc5965d6.js";import{d as N,Z as P,O as V,B as f,i as l,o,c as b,b as s,w as r,f as d,q as m,t as _,g as a,a as j,F as I,s as U,n as A,r as n}from"./app.d57d51e9.js";import{P as E}from"./PsButton.c9fc3d7e.js";import{c as L,d as M}from"./PsDangerDialog.1643aeb7.js";import{P as q}from"./PsBannerIcon.0cb3925c.js";import{P as Z}from"./PsBreadcrumb2.761286c6.js";import{P as G}from"./PsIcon.1e42bf4c.js";import{P as J}from"./PsDropdown.0c78da9b.js";import{P as K}from"./PsDropdownSelect.13d0e05f.js";import{D as Q}from"./PsTableSearch.3fb07b86.js";import{P as W}from"./PsIconButton.4f6354e0.js";import{P as X}from"./PsLabel.06b4363b.js";import{P as Y}from"./PsLink1.496ff966.js";import{P as x}from"./PsToggle.fddd5498.js";import{P as ee}from"./PsTable2.1a00358d.js";import{P as te}from"./PsRating.47d364e7.js";import{D as re}from"./DatePicker.2eba1133.js";import{_ as oe}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsWarningDialog.67ba6cb5.js";import"./PsModal.f198af2b.js";import"./vue-neat-modal.d9ed1877.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.66190284.js";import"./SidebarSubTab.148b6988.js";import"./PsErrorDialog.a25aef9e.js";import"./PsInputWithRightIcon.8c9e6c80.js";import"./PsSuccessDialog.a19b3bb4.js";import"./PsLoading.1f212adc.js";import"./PsInput.b3485f1e.js";import"./PsLabelCaption.b0af0e56.js";import"./PsLoadingCircleDialog.c95deca1.js";import"./PsIcon1.c6e725b1.js";import"./Icons.ebbb778b.js";import"./toggle.6b621a64.js";import"./moment.9709ab41.js";import"./main.f21f1fe5.js";import"./index.edd1d404.js";const se=N({name:"Index",components:{Head:P,PsButton:E,PsTextButton:L,PsBannerIcon:q,PsBreadcrumb2:Z,PsDangerDialog:M,PsIcon:G,PsDropdown:J,PsDropdownSelect:K,Dropdown:Q,PsIconButton:W,PsLabel:X,PsLink1:Y,PsToggle:x,PsTable2:ee,PsRating:te,DatePicker:re},layout:T,props:{can:Object,status:Object,users:Object,roles:Object,customizeHeaders:Object,customizeDetails:Object,hideShowFieldForFilterArr:Object,showCoreAndCustomFieldArr:Object,selectedRole:{type:String,default:""},authUser:Object,usrIsVerifyBlueMark:String,uis:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String},methods:{handleCreate(){this.$inertia.get(route("user.create"))},handleEdit(e){this.$inertia.get(route("user.edit",e))},handlePublish(e,u){u&&this.$inertia.put(route("user.statusChange",e))},FilterOptionshandle(e){V.post(route("user.screenDisplayUiSetting.store"),{value:e,sort_field:this.sort_field,sort_order:this.sort_order,row:this.users.per_page,search:this.search.value,current_page:this.users.current_page},{preserveScroll:!0,preserveState:!0})}},created(){this.columns=this.showCoreAndCustomFieldArr.map(e=>({action:e.action,field:e.field,label:f(e.label),sort:e.sort,type:e.type})),this.colFilterOptions=this.hideShowFieldForFilterArr.map(e=>({hidden:e.hidden,id:e.id,key:f(e.key),key_id:e.key_id,label:f(e.label),module_name:e.module_name}))},computed:{breadcrumb(){return[{label:f("core__be_dashboard_label"),url:route("admin.index")},{label:f("user_module"),color:"text-primary-500"}]}},setup(e){const u=l(!1),H=l(!1);let v=l(!1),S=e.search?l(e.search):l(""),D=e.sort_field?l(e.sort_field):l(""),w=e.sort_order?l(e.sort_order):l("desc"),y=e.selectedRole?l(e.selectedRole):l(""),k=e.selectedDate?l(e.selectedDate):l("");const p=l();let c=l();const C=l();function h(t){C.value.openModal(f("core__be_delete_user"),f("delete_user_msg"),f("core__be_btn_confirm"),f("core__be_btn_cancel"),()=>{V.delete(route("user.destroy",t),{onSuccess:()=>{v.value=!0,setTimeout(()=>{v.value=!1},3e3)},onError:()=>{v.value=!0,setTimeout(()=>{v.value=!1},3e3)}})},()=>{})}function F(t){this.$inertia.put(route("user.ban",t))}function O(t){D.value=t.field,w.value=t.sort_order,g()}function B(t){y.value=t,g(1)}function $(t){k.value=t,g(1)}function R(t){S.value=t,g(1)}function z(t){g(1,t)}function g(t=null,i=null){V.get(route("user.index"),{sort_field:D.value,sort_order:w.value,page:t!=null?t:e.users.meta.current_page,row:i!=null?i:e.users.meta.per_page,search:S.value,role_filter:y.value,date_filter:k.value},{preserveScroll:!0,preserveState:!0})}return{handleBanUser:F,showFilter:u,clearFilter:H,columns:c,confirmDeleteClicked:h,ps_danger_dialog:C,colFilterOptions:p,visible:v,handleSorting:O,handleSearchingSorting:g,handleRolefilter:B,handleDatefilter:$,handleRow:z,handleSearching:R,selected_role:y,selected_date:k}}}),le={class:"rounded-md shadow-xs w-56"},ae={class:"pt-2 z-30"},ne=["onClick"],ie={key:0,class:"flex flex-row"},de={key:1,class:"flex flex-row"},ue={key:2},ce={key:3,class:""},me={key:0,class:"flex flex-row"};function _e(e,u,H,v,S,D){const w=n("Head"),y=n("ps-breadcrumb-2"),k=n("ps-banner-icon"),p=n("ps-icon"),c=n("ps-button"),C=n("ps-dropdown-select"),h=n("ps-label"),F=n("ps-dropdown"),O=n("date-picker"),B=n("ps-rating"),$=n("ps-toggle"),R=n("ps-danger-dialog"),z=n("ps-table2"),g=n("ps-layout");return o(),b(I,null,[s(w,{title:e.$t("user_module")},null,8,["title"]),s(g,null,{default:r(()=>[s(y,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),e.visible?(o(),d(k,{key:0,visible:e.visible,theme:e.status.flag=="danger"?"bg-red-500":e.status.flag=="warning"?"bg-yellow-500":"bg-green-500",iconName:e.status.flag=="danger"?"close-circle":e.status.flag=="warning"?"alert-triangle":"rightalert",class:"text-white mb-5 sm:mb-6 lg:mb-8",iconColor:"white"},{default:r(()=>[m(_(e.status.msg),1)]),_:1},8,["visible","theme","iconName"])):a("",!0),s(z,{customizeDetails:e.customizeDetails,row:e.row,search:e.search,object:this.users,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,globalSearchPlaceholder:e.$t("core__be_search_user"),onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter},{button:r(()=>[e.can.createItem?(o(),d(c,{key:0,onClick:u[0]||(u[0]=t=>e.handleCreate()),rounded:"rounded-lg",type:"button",class:"flex flex-wrap items-center"},{default:r(()=>[s(p,{name:"plus",class:"me-1 font-semibold"}),m(" "+_(e.$t("core__be_add_user")),1)]),_:1})):a("",!0)]),responsive_button:r(()=>[e.can.createItem?(o(),d(c,{key:0,onClick:u[1]||(u[1]=t=>e.handleCreate()),rounded:"rounded-lg",type:"button",class:"flex flex-wrap items-center"},{default:r(()=>[s(p,{name:"plus",class:"me-1 font-semibold"}),m(" "+_(e.$t("core__be_add_user")),1)]),_:1})):a("",!0)]),searchRight:r(()=>[s(F,{align:"",class:"me-2 w-56 h-10"},{select:r(()=>[s(C,{placeholder:e.$t("core__be_role"),selectedValue:e.selected_role==""||e.selected_role=="all"?"":e.roles.filter(t=>t.id==e.selected_role)[0].name},null,8,["placeholder","selectedValue"])]),list:r(()=>[j("div",le,[j("div",ae,[j("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:u[2]||(u[2]=t=>e.handleRolefilter("all"))},[s(h,{class:"text-gray-200 ms-2"},{default:r(()=>[m(_(e.$t("core__be_select_all")),1)]),_:1})]),(o(!0),b(I,null,U(e.roles,t=>(o(),b("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:i=>e.handleRolefilter(t.id)},[s(h,{class:A(["ms-2",t.id==e.selected_role?" font-bold":""])},{default:r(()=>[m(_(t.name),1)]),_:2},1032,["class"])],8,ne))),128))])])]),_:1}),s(O,{onDatepick:e.handleDatefilter,class:A(["rounded shadow-sm pt-0.5 focus:outline-none focus:ring-1 focus:ring-primary-500",(e.selected_date==null||e.selected_date=="","w-full")]),value:e.selected_date,"onUpdate:value":u[3]||(u[3]=t=>e.selected_date=t),range:!0,inline:!1,autoApply:!1},null,8,["onDatepick","class","value"])]),tableRow:r(t=>[t.field==e.usrIsVerifyBlueMark?(o(),b("div",ie,[s(h,{class:"whitespace-nowrap dark:text-white"},{default:r(()=>[t.row[e.usrIsVerifyBlueMark]==1?(o(),d(h,{key:0,class:"flex flex-row",textColor:"text-green-600"},{default:r(()=>[s(h,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-green-600"}),m(" "+_(e.$t("bluemarkuser__be_applied_label")),1)]),_:1})):(o(),d(h,{key:1,class:"flex flex-row"},{default:r(()=>[s(h,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-secondary-800 dark:bg-secondary-100"}),m(" "+_(e.$t("core__be_nomal_user")),1)]),_:1}))]),_:2},1024)])):a("",!0),t.field=="overall_rating"?(o(),b("div",de,[s(B,{grade:t.row.overall_rating,hasCounter:!0},null,8,["grade"]),m(" "+_(t.row.overall_rating),1)])):a("",!0),t.field=="status"?(o(),b("div",ue,[t.row.user_is_sys_admin!=1?(o(),d($,{key:0,disabled:!t.row.authorizations.update,selectedValue:t.row.status==1,onClick:i=>e.handlePublish(t.row.id,t.row.authorizations.update),toggleOnTheme:"bg-primary-500 border-primary-500 "},null,8,["disabled","selectedValue","onClick"])):a("",!0),t.row.user_is_sys_admin==1?(o(),d($,{key:1,disabled:!0,selectedValue:t.row.status==1},null,8,["selectedValue"])):a("",!0)])):a("",!0),t.field=="is_banned"?(o(),b("span",ce,[t.row.is_banned!=1?(o(),d(c,{key:0,disabled:!t.row.authorizations.update||t.row.user_is_sys_admin==1,onClick:i=>e.handleBanUser(t.row.id),class:"w-16",border:"border border-red-500",rounded:"rounded",colors:"bg-white text-red-500",padding:"px-10 py-1",hover:"hover:bg-red-500 hover:text-white",focus:""},{default:r(()=>[m(_(e.$t("core__be_user_ban")),1)]),_:2},1032,["disabled","onClick"])):(o(),d(c,{key:1,disabled:!t.row.authorizations.update||t.row.user_is_sys_admin==1,class:"w-16",border:"border border-red-400",rounded:"rounded",colors:"bg-red-400 text-white",padding:"px-10 py-1",hover:"",focus:"",cursor:"cursor-not-allowed"},{default:r(()=>[m(_(e.$t("core__be_unban_lbl")),1)]),_:2},1032,["disabled"]))])):a("",!0)]),tableActionRow:r(t=>[t.field=="action"?(o(),b("div",me,[t.row.user_is_sys_admin!=1?(o(),d(c,{key:0,disabled:!t.row.authorizations.update,onClick:i=>e.handleEdit(t.row.id),class:"me-2",rounded:"rounded-lg",colors:"bg-green-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-green-100",focus:"focus:outline-none focus:ring focus:ring-green-200"},{default:r(()=>[s(p,{theme:"text-white dark:text-primary-900",name:"editPencil",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"])):a("",!0),t.row.user_is_sys_admin!=1?(o(),d(c,{key:1,disabled:!t.row.authorizations.delete,onClick:i=>e.confirmDeleteClicked(t.row.id),rounded:"rounded-lg",colors:"bg-red-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-red-100",focus:"focus:outline-none focus:ring focus:ring-red-200"},{default:r(()=>[s(p,{theme:"text-white dark:text-primary-900",name:"trash",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"])):a("",!0),t.row.user_is_sys_admin==1?(o(),d(c,{key:2,disabled:e.authUser.id!=1,onClick:i=>e.handleEdit(t.row.id),class:"me-2",rounded:"rounded-lg",colors:"bg-green-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-green-100",focus:"focus:outline-none focus:ring focus:ring-green-200"},{default:r(()=>[s(p,{theme:"text-white dark:text-primary-900",name:"editPencil",w:"16",h:"16"})]),_:2},1032,["disabled","onClick"])):a("",!0),t.row.user_is_sys_admin==1?(o(),d(c,{key:3,disabled:!0,onClick:i=>e.confirmDeleteClicked(t.row.id),rounded:"rounded-lg",colors:"bg-red-400 text-white",padding:"p-1.5",hover:"hover:outline-none hover:ring hover:ring-red-100",focus:"focus:outline-none focus:ring focus:ring-red-200"},{default:r(()=>[s(p,{theme:"text-white dark:text-primary-900",name:"trash",w:"16",h:"16"})]),_:2},1032,["onClick"])):a("",!0),s(R,{ref:"ps_danger_dialog"},null,512)])):a("",!0)]),_:1},8,["customizeDetails","row","search","object","colFilterOptions","columns","sort_field","sort_order","globalSearchPlaceholder","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable"])]),_:1})],64)}var Ye=oe(se,[["render",_e]]);export{Ye as default};
