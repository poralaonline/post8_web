import{d as q,p as E,Z as Y,i as r,y as Z,B as d,o as s,c as _,b as o,w as l,f as v,q as c,t as m,g as f,a as k,F as B,s as N,n as T,O as G,r as p}from"./app.d57d51e9.js";import{P as J}from"./PsLayout.bc5965d6.js";import{P as K}from"./PsLabel.06b4363b.js";import{P as Q}from"./PsButton.c9fc3d7e.js";import{P as W}from"./PsDataTable.af01e774.js";import{P as X}from"./PsAlert.0ab579ab.js";import{P as x}from"./PsBreadcrumb2.761286c6.js";import{d as ee,c as te}from"./PsDangerDialog.1643aeb7.js";import{P as ae}from"./PsToggle.fddd5498.js";import{P as le}from"./PsIcon.1e42bf4c.js";import{P as oe}from"./PsBannerIcon.0cb3925c.js";import{D as re}from"./PsTableSearch.3fb07b86.js";import{P as ne}from"./PsIconButton.4f6354e0.js";import{P as se}from"./PsTable2.1a00358d.js";import{P as ie}from"./PsDropdown.0c78da9b.js";import{P as de}from"./PsDropdownSelect.13d0e05f.js";import{D as ce}from"./DatePicker.2eba1133.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsWarningDialog.67ba6cb5.js";import"./PsModal.f198af2b.js";import"./vue-neat-modal.d9ed1877.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.66190284.js";import"./SidebarSubTab.148b6988.js";import"./PsErrorDialog.a25aef9e.js";import"./PsInputWithRightIcon.8c9e6c80.js";import"./PsSuccessDialog.a19b3bb4.js";import"./PsLoading.1f212adc.js";import"./PsInput.b3485f1e.js";import"./PsLabelCaption.b0af0e56.js";import"./PsLoadingCircleDialog.c95deca1.js";import"./moment.9709ab41.js";import"./ps_constants.115f3686.js";import"./PsIcon1.c6e725b1.js";import"./Icons.ebbb778b.js";import"./toggle.6b621a64.js";import"./main.f21f1fe5.js";import"./index.edd1d404.js";const pe=q({name:"Index",components:{Link:E,Head:Y,PsLabel:K,PsButton:Q,PsDataTable:W,PsAlert:X,PsBreadcrumb2:x,PsDangerDialog:ee,PsToggle:ae,PsIcon:le,PsBannerIcon:oe,Dropdown:re,PsIconButton:ne,PsTextButton:te,PsTable2:se,PsDropdown:ie,PsDropdownSelect:de,DatePicker:ce},layout:J,props:{status:Object,transactions:Object,packages:Object,checkPermission:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String,can:Object,selected_package:Object,selectedDate:Object,selected_payment_method:Object,payment_methods:Object},setup(e){const i=r(!1),H=r(!1),w=r(!0),I=[{id:1,name:"One Month"},{id:2,name:"Two Months"},{id:3,name:"Three Months"},{id:6,name:"Six Months"},{id:12,name:"One Year"}],R=["package.title","user.name"],C="Search";let P=e.search?r(e.search):r(""),S=e.sort_field?r(e.sort_field):r(""),F=e.sort_order?r(e.sort_order):r("desc"),$=r(!1),y=e.selected_package?r(e.selected_package):r(""),b=e.selectedDate?r(e.selectedDate):r(""),n=e.selected_payment_method?r(e.selected_payment_method):r("");const D=Z([{label:"User",key:"user_id",hidden:!1},{label:"Package",key:"package_id",hidden:!1},{label:"Amount",key:"price",hidden:!1},{label:"Payment Method",key:"payment_method",hidden:!1},{label:"Date",key:"added_date",hidden:!1}]),O=[{label:d("package_user_name"),field:"user_id",relation:"user",type:"String",relationField:"name",action:"Action"},{label:d("core_be__transaction_id"),field:"transaction_id",type:"String",action:"Action"},{label:d("core_be__plan"),field:"package_id",relation:"package",type:"String",relationField:["payment_info","id"],action:"Action"},{label:d("payment__be_vendor_sp_duration"),field:"duration",relation:"package",type:"String",relationField:"payment_attributes",action:"Action",sort:!1},{label:d("package_payment"),field:"payment_method",type:"String",action:"Action"},{label:d("package_amount"),field:"price",type:"Integer",action:"Action"},{label:d("status"),field:"status",type:"Integer",action:"Action",sort:!1},{label:d("core_be__purchased_date"),field:"added_date",type:"Timestamp",action:"Action"},{label:d("core_be__expired_date"),field:"expired_date",type:"Timestamp",action:"Action"},{label:d("detail_label"),field:"detail",type:"Action",sort:!1}];function A(a){this.$inertia.get(route("vendor_subscription_report.show",a))}function j(a){S.value=a.field,F.value=a.sort_order,h()}function t(a){P.value=a,h(1)}function g(a){h(1,a)}function V(){y.value="",b.value="",h(),w.value=!1,setTimeout(()=>{w.value=!0},100)}function M(a){b.value=a,h(1)}function L(a){y.value=a,h(1)}function z(a){n.value=a,h(1)}function U(a){b.value=a;let u=e.transactions.meta.current_page;h(u)}function h(a=null,u=null){G.get(route("vendor_subscription_report.index"),{sort_field:S.value,sort_order:F.value,page:a!=null?a:e.transactions.meta.current_page,row:u!=null?u:e.transactions.meta.per_page,search:P.value,package_filter:y.value,date_filter:b.value,selected_payment_method:n.value},{preserveScroll:!0,preserveState:!0})}return{showFilter:i,clearFilter:H,globalSearchFields:R,globalSearchPlaceholder:C,columns:O,colFilterOptions:D,handleDetail:A,handleSorting:j,handleSearching:t,handleRow:g,visible:$,handleClearFilter:V,handlePackagefilter:L,selected_package:y,selected_date:b,dateFilter:M,selected_payment_method:n,handlePaymentfilter:z,reRenderDate:w,handleDatefilter:U,duration:I}},computed:{breadcrumb(){return[{label:d("core__be_dashboard_label"),url:route("admin.index")},{label:d("vendor_subscription_report_module"),color:"text-primary-500"}]}}}),ue={class:"rounded-md shadow-xs w-56"},_e={class:"pt-2 z-30"},fe=["onClick"],be={class:"rounded-md shadow-xs w-56"},he={class:"pt-2 z-30"},ge=["onClick"],ye={key:0,class:"flex flex-row mb-2"},ke={key:1,class:"flex flex-row mb-2"},ve={key:2,class:"flex flex-row mb-2"},we={key:3,class:""};function Pe(e,i,H,w,I,R){const C=p("Head"),P=p("ps-breadcrumb-2"),S=p("ps-banner-icon"),F=p("ps-icon"),$=p("ps-text-button"),y=p("ps-icon-button"),b=p("ps-dropdown-select"),n=p("ps-label"),D=p("ps-dropdown"),O=p("date-picker"),A=p("ps-table2"),j=p("ps-layout");return s(),_(B,null,[o(C,{title:e.$t("package_report_module")},null,8,["title"]),o(j,null,{default:l(()=>[o(P,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),e.visible?(s(),v(S,{key:0,visible:e.visible,theme:e.status.flag=="danger"?"bg-red-500":e.status.flag=="warning"?"bg-yellow-500":"bg-green-500",iconName:e.status.flag=="danger"?"close-circle":e.status.flag=="warning"?"alert-triangle":"rightalert",class:"text-white mb-5 sm:mb-6 lg:mb-8",iconColor:"white"},{default:l(()=>[c(m(e.status.msg),1)]),_:1},8,["visible","theme","iconName"])):f("",!0),o(A,{row:e.row,search:e.search,object:e.transactions,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,globalSearchPlaceholder:e.$t("core__be_search_user"),onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter,eye_filter:!1},{searchRight:l(()=>[e.showFilter?(s(),v($,{key:0,onClick:i[0]||(i[0]=t=>e.clearFilter=!0),class:"flex text-sm items-center text-red-400",padding:"py-1 px-4"},{default:l(()=>[o(F,{theme:"dark:text-red-400",name:"cross",class:"me-3"}),c(" "+m(e.$t("core__be_clear_filter")),1)]),_:1})):f("",!0),o(y,{colors:e.showFilter?"bg-primary-500 text-white dark:text-secondary-800":"",focus:"",padding:"py-1 px-4",hover:"hover:bg-primary-500 hover:text-white",border:e.showFilter?"border border-primary-500":" border border-secondary-200",leftIcon:"filter",onClick:i[1]||(i[1]=t=>e.showFilter=!e.showFilter)},{default:l(()=>[c(m(e.$t("core__be_filter")),1)]),_:1},8,["colors","border"])]),Filter:l(()=>[o(D,{align:"",class:"h-10"},{select:l(()=>[o(b,{placeholder:e.$t("core_be__plan"),selectedValue:e.selected_package==""||e.selected_package=="all"?"":e.packages.filter(t=>t.id==e.selected_package)[0].value},null,8,["placeholder","selectedValue"])]),list:l(()=>[k("div",ue,[k("div",_e,[k("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:i[2]||(i[2]=t=>e.handlePackagefilter("all"))},[o(n,{class:"text-gray-200 ms-2"},{default:l(()=>[c(m(e.$t("core__be_select_all")),1)]),_:1})]),(s(!0),_(B,null,N(e.packages,t=>(s(),_("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:g=>e.handlePackagefilter(t.id)},[o(n,{class:T(["ms-2",t.id==e.selected_package?" font-bold":""])},{default:l(()=>[c(m(t.value),1)]),_:2},1032,["class"])],8,fe))),128))])])]),_:1}),o(D,{align:"",class:"h-10"},{select:l(()=>[o(b,{placeholder:e.$t("package_report_payment_method"),selectedValue:e.selected_payment_method==""||e.selected_payment_method=="all"?"":e.payment_methods.filter(t=>t==e.selected_payment_method)[0]},null,8,["placeholder","selectedValue"])]),list:l(()=>[k("div",be,[k("div",he,[k("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:i[3]||(i[3]=t=>e.handlePaymentfilter("all"))},[o(n,{class:"text-gray-200 ms-2"},{default:l(()=>[c(m(e.$t("core__be_select_all")),1)]),_:1})]),(s(!0),_(B,null,N(e.payment_methods,(t,g)=>(s(),_("div",{key:g,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:V=>e.handlePaymentfilter(t)},[o(n,{class:T(["ms-2",t==e.selected_payment_method?" font-bold":""])},{default:l(()=>[c(m(t),1)]),_:2},1032,["class"])],8,ge))),128))])])]),_:1}),e.reRenderDate?(s(),v(O,{key:0,onDatepick:e.handleDatefilter,class:T(["rounded shadow-sm pt-0.5 focus:outline-none focus:ring-1 focus:ring-primary-500",(e.selected_date==null||e.selected_date=="","w-full")]),value:e.selected_date,"onUpdate:value":i[4]||(i[4]=t=>e.selected_date=t),range:!0,inline:!1,autoApply:!1},null,8,["onDatepick","class","value"])):f("",!0)]),tableRow:l(t=>[t.field=="detail"?(s(),_("div",ye,[o($,{onClick:g=>e.handleDetail(t.row.id)},{default:l(()=>[c(m(e.$t("core__be_btn_detail")),1)]),_:2},1032,["onClick"])])):f("",!0),t.field=="package_id"?(s(),_("div",ke,[o(n,null,{default:l(()=>[c(m(t.row.package.payment_info.value),1)]),_:2},1024)])):f("",!0),t.field=="duration"?(s(),_("div",ve,[o(n,null,{default:l(()=>[c(m(e.duration.filter(g=>g.id==t.row.package.payment_attributes.duration)[0].name),1)]),_:2},1024)])):f("",!0),t.field=="status"?(s(),_("div",we,[t.row.status==1?(s(),v(n,{key:0,class:"flex flex-row",textColor:"text-green-500"},{default:l(()=>[o(n,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-green-500"}),c(" "+m(e.$t("core__be_active_status")),1)]),_:1})):f("",!0),t.row.status==0?(s(),v(n,{key:1,class:"flex flex-row",textColor:"text-red-500"},{default:l(()=>[o(n,{class:"w-2 h-2 my-auto rounded-full me-2",textColor:"bg-red-500"}),c(" "+m(e.$t("core__be_expired_status")),1)]),_:1})):f("",!0)])):f("",!0)]),_:1},8,["row","search","object","colFilterOptions","columns","sort_field","sort_order","globalSearchPlaceholder","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable"])]),_:1})],64)}var dt=me(pe,[["render",Pe]]);export{dt as default};
