import E from"./PsModal.15d0cd4c.js";import B from"./PsButton.38caef2b.js";import{P as w}from"./PsValueStore.97ab20f6.js";import K from"./PsErrorDialog.01320524.js";import{a as C,P as m}from"./PsApiService.1464e9d5.js";import{A as k}from"./ApiStatus.5720ba0b.js";import{P as R}from"./PsObject.a17ef38f.js";import{bD as $,y as _,i as v,d as N,o as x,c as A,b as c,w as y,a as M,q as b,t as I,F as T,B as D,r as h}from"./app.d57d51e9.js";import{m as q}from"./PsSepetetedStore.9a31ac47.js";import{d as L}from"./dropin.1dc84efe.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";class f extends R{constructor(){super(...arguments),this.vendorStripeEnabled="",this.vendorPaypalEnabled="",this.vendorRazorEnabled="",this.vendorPaystackEnabled="",this.vendorRazorKey="",this.vendorStripePublishableKey="",this.vendorPaystackKey=""}init(e,t,o,l,p,s,i){return this.vendorStripeEnabled=e,this.vendorPaypalEnabled=t,this.vendorRazorEnabled=o,this.vendorPaystackEnabled=l,this.vendorRazorKey=p,this.vendorStripePublishableKey=s,this.vendorPaystackKey=i,this}getPrimaryKey(){return""}fromMap(e){return new f().init(e.vendor_stripe_enabled,e.vendor_paypal_enabled,e.vendor_razor_enabled,e.vendor_paystack_enabled,e.vendor_razor_key,e.vendor_stripe_publishable_key,e.vendor_paystack_key)}fromMapList(e){const t=[];for(const o in e)o!=null&&t.push(this.fromMap(o));return t}toMap(e){const t={};return t.vendor_stripe_enabled=e.vendorStripeEnabled,t.vendor_paypal_enabled=e.vendorPaypalEnabled,t.vendor_razor_enabled=e.vendorRazorEnabled,t.vendor_paystack_enabled=e.vendorPaystackEnabled,t.vendor_razor_key=e.vendorRazorKey,t.vendor_stripe_publishable_key=e.vendorStripePublishableKey,t.vendor_paystack_key=e.vendorPaystackKey,t}toMapList(e){const t=[];for(let o=0;o<e.length;o++)e[o]!=null&&t.push(this.toMap(e[o]));return t}}class H{constructor(){this.userId="",this.paymentMethod="",this.paymentMethodNounce="",this.paymentAmount="",this.razorId="",this.isPaystack="",this.orderId="",this.vendorId="",this.currencyId=""}VendorItemBoughtParameterHolder(){this.userId="",this.paymentMethod="",this.paymentMethodNounce="",this.paymentAmount="",this.razorId="",this.isPaystack="",this.orderId="",this.vendorId="",this.currencyId=""}toMap(){const e={};return e.user_id=this.userId,e.payment_method=this.paymentMethod,e.payment_method_nonce=this.paymentMethodNounce,e.payment_amount=this.paymentAmount,e.razor_id=this.razorId,e.is_paystack=this.isPaystack,e.order_id=this.orderId,e.vendor_id=this.vendorId,e.currency_id=this.currencyId,e}}const F=q(a=>$(`vendorItemBoughtStore/${a}`,()=>{const e=_(new C),t=v(""),o=_({value:!1});let l=_(new H);async function p(d,r){o.value=!0;const n=await m.postVendorItemBought(new k,d,r.toMap());return o.value=!1,n}async function s(d,r){o.value=!0;const n=await m.getVendorPaypalToken(new k,d,r);return o.value=!1,n}async function i(d,r){o.value=!0;const n=await m.postShippingAndBilling(new f,d,r);return e.data=n.data,e.code=n.code,e.status=n.status,e.message=n.message,o.value=!1,e}return{paramHolder:l,postVendorItemBought:p,getVendorPaypalToken:s,getVendorInfo:i,paymentNonce:t,loading:o}})),U=N({name:"VendorPaypalModal",components:{PsModal:E,PsButton:B,PsErrorDialog:K},setup(){const a=v(),e=v(),o=w().getLoginUserId(),l=F();let p,s;function i(r){r=="yes"?p():s(),a.value.toggle(!1)}async function d(r,n,S){a.value.toggle(!0),p=r,s=n;const V=await l.getVendorPaypalToken(S,o),u=document.querySelector("#submit-button");L.create({authorization:V.data.message,container:"#dropin-container",paypal:{flow:"vault"}},function(Y,g){u==null||u.addEventListener("click",function(){g.isPaymentMethodRequestable()&&setTimeout(function(){g.requestPaymentMethod(async function(z,P){if(console.log(P),z){e.value.openModal("",D("paypal_credit_card_modal__error_paid_ad"));return}l.paymentNonce=P.nonce,i("yes")})},200)})})}return{psmodal:a,ps_error_dialog:e,openModal:d,actionClicked:i}}}),G=M("div",{id:"dropin-container"},null,-1),J={class:"flex justify-center mx-auto"};function Q(a,e,t,o,l,p){const s=h("ps-button"),i=h("ps-modal"),d=h("ps-error-dialog");return x(),A(T,null,[c(i,{ref:"psmodal",line:"hidden",isClickOut:!1},{body:y(()=>[G,M("div",J,[c(s,{id:"submit-button"},{default:y(()=>[b(I(a.$t("paypal_credit_card_modal__submit_payment")),1)]),_:1}),c(s,{theme:"btn-second",class:"text-center mx-4",onClick:e[0]||(e[0]=r=>a.actionClicked("no"))},{default:y(()=>[b(I(a.$t("paypal_credit_card_modal__close")),1)]),_:1})])]),_:1},512),c(d,{ref:"ps_error_dialog"},null,512)],64)}var W=O(U,[["render",Q]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{f as V,W as a,H as b,le as c,F as u};
