import{Z as O,O as j,i as A,o as s,c as i,b as n,a as r,w as d,q as m,t as a,F as k,s as H,g as E,m as B,f as S,n as F,r as _,E as q}from"./app.d57d51e9.js";import D from"./PsIcon.9f1bf232.js";import $ from"./PsLabelCaption3.8965a479.js";import G from"./PsButton.38caef2b.js";import Z from"./PsRouteLink.0b0ba539.js";import{u as M}from"./ChatHistoryListStore.3ce518d6.js";import{u as J,U as K}from"./UserUnReadMessageParameterHolder.7f49d04a.js";import{P as Q}from"./PsValueStore.97ab20f6.js";import W from"./PsLabel.b794d5bb.js";import X from"./PsAdSense.3ddcfd76.js";import{u as ee}from"./AppInfoStore.9a878473.js";import{A as te}from"./AppInfoParameterHolder.e24d894d.js";import{P as b}from"./ps_constants.115f3686.js";import re from"./ChatHorizontalItem.6cae23f6.js";import oe from"./ChatBuyerHorizontalItem.a78c3e6d.js";import se from"./ChatSkeletorItem.f093735b.js";import ae from"./PsFrontendLayout.296a569b.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsApiService.1464e9d5.js";import"./ChatHistory.5e14406e.js";import"./PsObject.a17ef38f.js";import"./Product.8b62d5d3.js";import"./DefaultPhoto.cc755f93.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemLocationTownship.94979fe0.js";import"./ProductRelation.0b376978.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./Vendor.fb84ea36.js";import"./SyncChatHistoryParameterHolder.24ffbfbb.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsCard.bad5d4b2.js";import"./PsValueHolder.31da39a6.js";import"./moment.9709ab41.js";import"./format.min.0ec31140.js";import"./vue-skeletor.esm.fceae8e3.js";/* empty css                     */import"./FooterView.a4d00124.js";import"./FooterLinkSection.df20daea.js";import"./PsLink.9f60ebb7.js";import"./PsLabelCaption.1fabc18a.js";import"./ProductParameterHolder.e481cecf.js";import"./PsNavTabBar.51c56524.js";import"./PsDropdown.7e09801f.js";import"./PsDropdownSelect.a17b6ef7.js";import"./PsIconToggle.a1ed1abf.js";import"./PsInputWithLeftIcon.098c7e47.js";import"./LocationModal.bd35d2f7.js";import"./PsModal.15d0cd4c.js";import"./vue-neat-modal.d9ed1877.js";import"./PsLine.257bf9fc.js";import"./LocationParameterHolder.654c399d.js";import"./ItemLocationTownshipStore.0ddf7240.js";import"./PsNavBar.7b51b9e1.js";import"./UserStore.cdfd4a60.js";import"./UserListParameterHolder.d110b747.js";import"./ApiStatus.5720ba0b.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./PsConfirmDialog.ca5a3fee.js";import"./PsUtils.eb7a8002.js";import"./PsNotificationBox.9d7f028f.js";import"./ProductStore.8e90df71.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./NotificationStore.d8e86611.js";import"./NotiUnRegisterHolder.eefb692e.js";import"https://unpkg.com/delayed-scroll-restoration-polyfill@0.1.1/index.js";class R{constructor(){this.userId="",this.returnType=""}ChatHistoryPrameterHolder(){this.userId="",this.returnType=""}getSellerHistoryList(){return this.userId="",this.returnType=b.CHAT_TYPE_SELLER,this}getBuyerHistoryList(){return this.userId="",this.returnType=b.CHAT_TYPE_BUYER,this}resetParameterHolder(){return this.userId="",this.returnType="",this}toMap(){const f={};return f.user_id=this.userId,f.return_type=this.returnType,f}}const ie={name:"ChatListView",components:{PsButton:G,PsLabel:W,PsLabelCaption3:$,PsIcon:D,ChatHorizontalItem:re,ChatBuyerHorizontalItem:oe,ChatSkeletorItem:se,PsRouteLink:Z,PsAdSense:X,Head:O},props:["mobileSetting"],layout:ae,setup(t){var I,U,L,T;const f=Q(),h=M("buyer"),e=M("seller");h.limit=(U=(I=t.mobileSetting)==null?void 0:I.default_loading_limit)!=null?U:12,e.limit=(T=(L=t.mobileSetting)==null?void 0:L.default_loading_limit)!=null?T:12;const x=J(),c=f.getLoginUserId();(c==null||c==""||c==b.NO_LOGIN_USER)&&j.get(route("login"));const y=new R().resetParameterHolder(),u=new R().resetParameterHolder(),l=new K,p=A(!0),g=A(!1),w=ee(),P=new te;P.userId=c,y.userId=c,y.returnType=b.CHAT_TYPE_SELLER,u.userId=c,u.returnType=b.CHAT_TYPE_BUYER,l.userId=c,l.deviceToken=localStorage.deviceToken,x.postUserUnreadMessageCount(l),v();async function v(){await h.resetChatHistoryList(c,u),p.value=!1}async function C(){g.value=!0,p.value=!0,await e.resetChatHistoryList(c,y),await x.postUserUnreadMessageCount(l),p.value=!1}async function o(){g.value=!1,p.value=!0,await h.resetChatHistoryList(c,u),await x.postUserUnreadMessageCount(l),p.value=!1}async function z(){await e.loadChatHistoryList(c,y)}async function N(){await h.loadChatHistoryList(c,u)}function V(Ve){return"10"}function Y(){j.get(route("fe_item_entry"))}return{getPrice:V,chatsellerhistorylistStore:e,chatbuyerhistorylistStore:h,userunreadmsgStore:x,sellerClicked:C,buyerClicked:o,ps_loading:p,isSellerFocus:g,PsConst:b,loadMore:z,loadMoreBuyer:N,appInfoStore:w,startSellingClicked:Y}}},ne={class:"sm:mt-32 lg:mt-36 mt-28 px-5 xl:px-52 mx-auto"},de={class:"grid lg:grid-col-12 sm:grid-col-8 grid-col-4 gap-4"},ce={class:"col-start-0 col-span-4 sm:col-span-2 lg:col-span-3"},me={class:""},ue={key:0,class:"flex flex-row",id:"sellerbtn",disabled:!0},pe={class:"me-2 md:me-4 text-fePrimary-500 font-semibold"},_e={class:"flex justify-center items-center font-normal text-sm rounded-full w-5 h-5 bg-feSecondary-100 hover:bg-fePrimary-500 hover:text-feSecondary-100 text-feAchromatic-900"},fe={class:"me-2 md:me-4 font-medium dark:text-feAchromatic-200 text-feArchromatic-900"},he={class:"flex justify-center items-center font-normal text-sm rounded-full w-5 h-5 bg-feSecondary-100 hover:bg-fePrimary-500 hover:text-feSecondary-100 text-feAchromatic-900"},ye={key:1,class:"flex flex-row",id:"buyerbtn",disabled:!0},ge={class:"me-2 md:me-4 font-medium dark:text-feAchromatic-200"},be={class:"flex justify-center items-center font-normal text-sm rounded-full w-5 h-5 bg-feSecondary-100 hover:bg-fePrimary-500 hover:text-feSecondary-100 text-feAchromatic-900"},xe={class:"me-2 md:me-4 text-fePrimary-500 font-semibold"},ve={class:"flex justify-center items-center font-normal text-sm rounded-full w-5 h-5 hover:bg-fePrimary-500 hover:text-feSecondary-100 bg-feSecondary-100 text-feAchromatic-900"},Ce={class:"col-span-4 sm:col-span-6 lg:col-span-9"},ke={key:0},Se={id:"seller",class:"w-full flex flex-col lg:p-4 p-2 sm:p-3"},we={class:"w-full"},Pe={class:"flex flex-col"},He={key:1,id:"seller",class:"flex flex-col mb-16"},Ie={class:"flex flex-row"},Ue={key:0,class:"w-full flex flex-col lg:p-4 p-2 sm:p-3 rounded"},Le={alt:"Placeholder",height:"auto",class:"w-screen object-cover rtl:space-x-reverse space-x-48"},Te={key:1,class:"flex flex-col w-full"},je={class:"flex items-end justify-end"},Ae={key:2,id:"buyer",class:"flex flex-col mb-16"},Ee={class:"flex flex-row"},Be={key:0,class:"w-full flex flex-col lg:p-4 p-2 sm:p-3 rounded"},Fe={alt:"Placeholder",height:"auto",class:"w-screen object-cover rtl:space-x-reverse space-x-48"},Me={key:1,class:"w-full"},Re={class:"flex flex-wrap w-full"},ze={class:"flex items-end justify-end"};function Ne(t,f,h,e,x,c){var C;const y=_("Head"),u=_("ps-label"),l=_("ps-button"),p=_("chat-skeletor-item"),g=_("ps-label-caption-3"),w=_("chat-horizontal-item"),P=_("chat-buyer-horizontal-item"),v=q("lazy");return s(),i(k,null,[n(y,{title:t.$t("chat_list__messages")},null,8,["title"]),r("div",ne,[r("div",de,[r("div",ce,[n(u,{class:"text-xl sm:text-3xl font-medium mb-5"},{default:d(()=>[m(a(t.$t("chat_list__messages")),1)]),_:1}),r("div",me,[e.isSellerFocus?(s(),i("div",ye,[n(l,{class:"w-34 mx-1",padding:"py-2 px-3",justify:"flex justify-start",hover:"none",colors:"bg-transparent",border:"border-b-2 border-b-feSecondary-50 dark:border-b-feSecondary-800",rounded:"none",onClick:e.buyerClicked},{default:d(()=>{var o;return[r("span",ge,a(t.$t("chat_list__from_buyer")),1),r("span",be,a((o=e.userunreadmsgStore.unreadCount.data)==null?void 0:o.sellerUnreadCount),1)]}),_:1},8,["onClick"]),n(l,{class:"w-34",padding:"py-2 px-3 ",justify:"flex justify-start",hover:"none",colors:"bg-transparent",border:"border-b-2 border-b-fePrimary-500",rounded:"none",onClick:e.sellerClicked},{default:d(()=>{var o;return[r("span",xe,a(t.$t("chat_list__from_seller")),1),r("span",ve,a((o=e.userunreadmsgStore.unreadCount.data)==null?void 0:o.buyerUnreadCount),1)]}),_:1},8,["onClick"])])):(s(),i("div",ue,[n(l,{class:"w-34 bg-transparent mx-1",padding:"py-2 px-3",justify:"flex justify-start",onClick:e.buyerClicked,color:"bg-fePrimary-500 ",hover:"hover:none",rounded:"none",border:"border-b-2 border-b-fePrimary-500"},{default:d(()=>{var o;return[r("span",pe,a(t.$t("chat_list__from_buyer")),1),r("span",_e,a((o=e.userunreadmsgStore.unreadCount.data)==null?void 0:o.sellerUnreadCount),1)]}),_:1},8,["onClick"]),n(l,{class:"w-34",padding:"py-2 px-3 ",justify:"flex justify-start",colors:"bg-transparent ",rounded:"none",border:"border-b-2 border-b-feSecondary-50 dark:border-b-feSecondary-800",hover:"hover-none",shadow:"none",onClick:e.sellerClicked},{default:d(()=>{var o;return[r("span",fe,a(t.$t("chat_list__from_seller")),1),r("span",he,a((o=e.userunreadmsgStore.unreadCount.data)==null?void 0:o.buyerUnreadCount),1)]}),_:1},8,["onClick"])]))])]),r("div",Ce,[e.ps_loading==!0?(s(),i("div",ke,[r("div",Se,[r("div",we,[r("div",Pe,[(s(),i(k,null,H(3,o=>r("div",{class:"w-full mt-2",key:o},[n(p)])),64))])])])])):E("",!0),e.isSellerFocus&&e.ps_loading==!1?(s(),i("div",He,[r("div",Ie,[e.chatsellerhistorylistStore.chatHistoryList.data==null?(s(),i("div",Ue,[B(r("img",Le,null,512),[[v,{src:t.$page.props.sysImageUrl+"/undraw_quick_chat_rebit.png",loading:t.$page.props.sysImageUrl+"/loading_gif.gif",error:t.$page.props.sysImageUrl+"/default_photo.png"}]]),n(u,{class:"text-base text-center sm:text-2xl mb-3 mt-3"},{default:d(()=>[m(a(t.$t("chat_list_no_messages")),1)]),_:1}),n(g,{class:"text-center mb-2"},{default:d(()=>[m(a(t.$t("chat_list_no_messages__paragraph")),1)]),_:1}),n(l,{onClick:e.startSellingClicked,class:"w-full sm:mx-auto sm:w-[456px]"},{default:d(()=>[m(a(t.$t("chat_list__start_selling")),1)]),_:1},8,["onClick"])])):(s(),i("div",Te,[(s(!0),i(k,null,H((C=e.chatsellerhistorylistStore.chatHistoryList)==null?void 0:C.data,o=>(s(),i("div",{class:"w-full",key:o.id},[n(w,{dateFormat:t.$page.props.dateFormat,chathistory:o},null,8,["dateFormat","chathistory"])]))),128))]))]),r("div",je,[e.chatsellerhistorylistStore.loading.value==!1?(s(),S(l,{key:0,class:F(["w-[108px] mx-auto mt-4",e.chatsellerhistorylistStore.isNoMoreRecord?"hidden":""]),onClick:e.loadMore},{default:d(()=>[m(a(t.$t("list__load_more")),1)]),_:1},8,["onClick","class"])):(s(),S(l,{key:1,class:"w-[108px] mx-auto mt-4",disabled:!0},{default:d(()=>[m(a(t.$t("list__loading")),1)]),_:1}))])])):e.ps_loading==!1?(s(),i("div",Ae,[r("div",Ee,[e.chatbuyerhistorylistStore.chatHistoryList.data==null?(s(),i("div",Be,[B(r("img",Fe,null,512),[[v,{src:t.$page.props.sysImageUrl+"/undraw_quick_chat_rebit.png",loading:t.$page.props.sysImageUrl+"/loading_gif.gif",error:t.$page.props.sysImageUrl+"/default_photo.png"}]]),n(u,{class:"text-base text-center sm:text-2xl mb-3 mt-3"},{default:d(()=>[m(a(t.$t("chat_list_no_messages")),1)]),_:1}),n(g,{class:"text-center mb-2"},{default:d(()=>[m(a(t.$t("chat_list_no_messages__paragraph")),1)]),_:1}),n(l,{onClick:e.startSellingClicked,class:"w-full sm:mx-auto sm:w-[456px]"},{default:d(()=>[m(a(t.$t("chat_list__start_selling")),1)]),_:1},8,["onClick"])])):(s(),i("div",Me,[r("div",Re,[(s(!0),i(k,null,H(e.chatbuyerhistorylistStore.chatHistoryList.data,o=>(s(),i("div",{class:"w-full",key:o.id},[n(P,{dateFormat:t.$page.props.dateFormat,chathistory:o},null,8,["dateFormat","chathistory"])]))),128))])]))]),r("div",ze,[e.chatbuyerhistorylistStore.loading.value==!1?(s(),S(l,{key:0,class:F(["w-[108px] mt-4 mx-auto",e.chatbuyerhistorylistStore.isNoMoreRecord.value?"hidden":""]),onClick:e.loadMoreBuyer},{default:d(()=>[m(a(t.$t("list__load_more")),1)]),_:1},8,["onClick","class"])):(s(),S(l,{key:1,class:"w-[108px] mx-auto mt-4",disabled:!0},{default:d(()=>[m(a(t.$t("list__loading")),1)]),_:1}))])])):E("",!0)])])])],64)}var or=le(ie,[["render",Ne]]);export{or as default};
