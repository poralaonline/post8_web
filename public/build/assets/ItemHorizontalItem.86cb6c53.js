import W from"./PsLabel.b794d5bb.js";import J from"./PsLabelTitle4.b5f977c0.js";import K from"./PsCard.bad5d4b2.js";import Q from"./PsIcon.9f1bf232.js";import{P as T}from"./ps_constants.115f3686.js";import X from"./PsAdSense.3ddcfd76.js";import Y from"./PsLoadingDialog.eb65b887.js";import{f as Z}from"./format.min.0ec31140.js";import $ from"./PsRouteLink.0b0ba539.js";import{i as E,o as i,c as n,a as g,f as P,w as a,n as U,b as r,m as M,g as m,q as d,t as s,F as ee,B as j,O as te,r as b,E as oe,R as ie,S as ae}from"./app.d57d51e9.js";import{P as B}from"./PsValueStore.97ab20f6.js";import{P as re}from"./Product.8b62d5d3.js";import{u as se}from"./PsValueHolder.31da39a6.js";import{u as le}from"./AppInfoStore.9a878473.js";import{u as ne}from"./ProductStore.8e90df71.js";import{u as q}from"./FavouriteItemStore.14479989.js";import{u as me,F as de}from"./FollowItemParameterHolder.9e957dbd.js";import{A as ce}from"./AppInfoParameterHolder.e24d894d.js";import{h as fe}from"./moment.9709ab41.js";import{_ as ue}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsApiService.1464e9d5.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./PsModal.15d0cd4c.js";import"./vue-neat-modal.d9ed1877.js";import"./PsLine.257bf9fc.js";import"./PsLabelTitle.6c83e503.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemLocationTownship.94979fe0.js";import"./ProductRelation.0b376978.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./Vendor.fb84ea36.js";import"./ProductParameterHolder.e481cecf.js";import"./ApiStatus.5720ba0b.js";import"./UserDeleteItemParameterHolder.5d816aba.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsUtils.eb7a8002.js";const _e={name:"ItemHorizontalItem",components:{PsLabel:W,PsLabelTitle4:J,PsCard:K,PsIcon:Q,PsAdSense:X,PsRouteLink:$,PsLoadingDialog:Y},props:{item:{type:re},notShowTitle:{type:Boolean,default:!1},onClick:Function,storeName:{type:String,default:""}},setup(o){var S,v,h;const p=E();B.psValueStore=se();const e=ne(o.storeName),t=q(),D=q("favourite"),V=me(),y=B(),c=y.getLoginUserId(),l=new ce,A=new de;l.userId=c;const f=le(),N=E(!1),z=E(o.item.user.userId==c);((h=(v=(S=f==null?void 0:f.appInfo)==null?void 0:S.data)==null?void 0:v.mobileSetting)==null?void 0:h.is_show_owner_info)=="1"&&(N.value=!0);function L(u){var I,w,_,x,C,k,H;if(u.toString()=="0"&&((w=(I=f.appInfo.data)==null?void 0:I.psAppSetting)==null?void 0:w.SelectedPriceType)==T.NORMAL_PRICE)return j("item_price__free");if(((x=(_=f.appInfo.data)==null?void 0:_.psAppSetting)==null?void 0:x.SelectedPriceType)==T.PRICE_RANGE){const G=parseFloat(u),O=parseInt(G);return O>5?"$".repeat(5):O<1?"$".repeat(1):"$".repeat(O)}else return Z((H=(k=(C=f==null?void 0:f.appInfo)==null?void 0:C.data)==null?void 0:k.mobileSetting)==null?void 0:H.price_format,u)}async function F(u){c&&c!=T.NO_LOGIN_USER?(p.value.openModal(),o.item.isFavourited=="1"?p.value.message=j("item_detail__removing_item_from_favourite"):p.value.message=j("item_detail__adding_item_to_favourite"),await t.postFavourite(u,c),await R(),p.value.closeModal()):te.get(route("login"))}async function R(){o.storeName==""?await V.refleshFollowerItemList(c,A):o.storeName=="favourite"?await D.refleshFavouriteItemList(c):await e.refleshProductList(c,e.paramHolder)}return{appInfoStore:f,formatPrice:L,PsConst:T,psValueStore:y,favouriteClicked:F,ps_loading_dialog:p,showProfile:N,moment:fe,isOwner:z}}},xe=o=>(ie("data-v-5065f641"),o=o(),ae(),o),ge={class:"h-44 relative z-0"},pe={class:"overflow-hidden h-44 w-full"},he={alt:"Placeholder",class:"overflow-hidden transform transition duration-500 hover:scale-110 rounded-t-lg object-cover w-screen h-44",width:"640px",height:"360px"},ye={key:1,class:"absolute bg-feWarning-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Se={key:2,class:"absolute bg-fePrimary-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Pe={key:0,class:"absolute bg-feSuccess-500 rounded px-2 py-1 left-0 top-8"},be={key:3,class:"absolute bg-feSuccess-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},ve={key:4,class:"absolute bg-feSecondary-300 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},Ie={key:5,class:"absolute bg-feError-500 rounded px-2 py-1 flex justify-center items-center left-2 top-2 z-20"},we={class:"absolute left-2 bottom-2 z-20"},Ce=xe(()=>g("div",{class:"relative lg:pt-48 pt-28"},null,-1)),ke={key:0,class:"ps-1 pt-1"},Ae={key:1},Ne={key:0,class:"ps-1 flex flex-row items-center justify-start"},ze={key:0},Le={key:1,class:"ps-1"},Fe={key:0,class:"pt-1 pb-2 flex items-center justify-between leading-none px-2 rounded-b-xl lg:rounded-b-2xl"},Re={class:"flex flex-row relative items-center no-underline text-feAchromatic-900"},Te={alt:"Placeholder",class:"rounded-full bg-transparent lg:w-8 lg:h-8 w-6 h-6 flex items-center justify-center object-cover",width:"50px",height:"50px"},Oe={class:"ms-2 mt-1 text-sm flex-grow"},Ee={class:"w-full lg:h-72 h-52 mx-auto lg:mt-12 lg:mb-12 mt-8 mb-6"};function je(o,p,e,t,D,V){var L,F,R;const y=b("ps-route-link"),c=b("ps-icon"),l=b("ps-label"),A=b("ps-card"),f=b("ps-ad-sense"),N=b("ps-loading-dialog"),z=oe("lazy");return i(),n(ee,null,[g("div",{class:"cursor-pointer w-full h-full pb-3",onClick:p[1]||(p[1]=S=>e.onClick!=null?e.onClick(e.item):null)},[((L=e.item)==null?void 0:L.adType)==t.PsConst.NORMAL_AD||((F=e.item)==null?void 0:F.adType)==t.PsConst.PAID_AD?(i(),P(A,{key:0,class:"flex w-full bg-feAchromatic-50 flex-col lg:rounded-lg shadow-sm",enabledHover:!0},{default:a(()=>{var S,v;return[g("div",{class:U(["lg:px-0 lg:py-0 px-1",t.showProfile?"rounded-b-xl lg:rounded-b-2xl":"rounded-xl lg:rounded-2xl"])},[g("div",ge,[r(y,{to:{name:"fe_item_detail",query:{item_id:e.item.id}},class:"absolute z-10"},{default:a(()=>[g("div",pe,[M(g("img",he,null,512),[[z,{src:o.$page.props.thumb2xUrl+"/"+e.item.defaultPhoto.imgPath,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]])])]),_:1},8,["to"]),!e.notShowTitle&&!t.isOwner?(i(),n("div",{key:0,class:"absolute z-10 bg-feAchromatic-50 dark:bg-feSecondary-800 rounded w-10 h-10 flex justify-center items-center right-2 top-2",onClick:p[0]||(p[0]=h=>t.favouriteClicked(e.item.id))},[e.item.isFavourited=="1"?(i(),P(c,{key:0,textColor:"text-fePrimary-500 dark:text-feAchromatic-50",class:"",name:"heart",h:"24",w:"24"})):(i(),P(c,{key:1,textColor:"text-fePrimary-500 dark:text-feAchromatic-50",class:"",name:"heart-outline",h:"24",w:"24"}))])):m("",!0),e.item.status=="0"?(i(),n("div",ye,[r(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[d(s(o.$t("core_fe__pending")),1)]),_:1})])):m("",!0),e.item.isDiscount=="1"&&e.item.status=="1"?(i(),n("div",Se,[r(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[d(s(e.item.percent)+s(o.$t("item_horizontal_item__discount")),1)]),_:1}),e.item.isPaid=="1"&&e.item.paidStatus==t.PsConst.paidItemProgressStatus&&e.item.status=="1"?(i(),n("div",Pe,[r(l,{class:"text-xs lg:text-sm font-medium text-center",textColor:"text-feAchromatic-50 "},{default:a(()=>[d(s(o.$t("item_horizontal_item__featured")),1)]),_:1})])):m("",!0)])):e.item.isPaid=="1"&&e.item.paidStatus==t.PsConst.paidItemProgressStatus&&e.item.status=="1"?(i(),n("div",be,[r(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[d(s(o.$t("item_horizontal_item__featured")),1)]),_:1})])):m("",!0),e.item.status=="2"?(i(),n("div",ve,[r(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feSecondary-500 "},{default:a(()=>[d(s(o.$t("core_fe__disabled")),1)]),_:1})])):m("",!0),e.item.status=="3"?(i(),n("div",Ie,[r(l,{class:"text-xs lg:text-sm text-center font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[d(s(o.$t("core_fe__rejected")),1)]),_:1})])):m("",!0),g("div",we,[e.item&&e.item.isSoldOut=="1"?(i(),P(l,{key:0,class:"py-1 px-2 text-sm rounded bg-fePrimary-500 font-medium",textColor:"text-feAchromatic-50 "},{default:a(()=>[d(s(o.$t("item_horizontal_item__sold_out")),1)]),_:1})):m("",!0)]),Ce]),r(y,{to:{name:"fe_item_detail",query:{item_id:e.item.id}}},{default:a(()=>{var h,u,I,w;return[e.notShowTitle?m("",!0):(i(),n("div",ke,[r(l,{class:"truncate-2-lines mb-0.5 font-normal text-sm",textColor:"text-feSecondary-600 dark:text-feSecondary-200"},{default:a(()=>[d(s(e.item?e.item.title:""),1)]),_:1})])),((u=(h=t.appInfoStore.appInfo.data)==null?void 0:h.psAppSetting)==null?void 0:u.SelectedPriceType)!=t.PsConst.NO_PRICE?(i(),n("div",Ae,[e.item.isDiscount=="1"&&((w=(I=t.appInfoStore.appInfo.data)==null?void 0:I.mobileSetting)==null?void 0:w.is_show_discount)=="1"&&!e.notShowTitle?(i(),n("div",Ne,[r(l,{class:"line-through me-2 font-semibold text-xs",textColor:"text-feSecondary-500 "},{default:a(()=>{var _,x,C,k;return[d(s(e.item&&((x=(_=t.appInfoStore.appInfo.data)==null?void 0:_.psAppSetting)==null?void 0:x.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" ",1),e.item&&((k=(C=t.appInfoStore.appInfo.data)==null?void 0:C.psAppSetting)==null?void 0:k.SelectedPriceType)==t.PsConst.NORMAL_PRICE?(i(),n("span",ze,s(t.formatPrice(e.item?e.item.originalPrice:"")),1)):m("",!0)]}),_:1}),r(l,{class:"font-semibold text-xs lg:text-base",textColor:"text-fePrimary-500 "},{default:a(()=>{var _,x;return[d(s(e.item&&((x=(_=t.appInfoStore.appInfo.data)==null?void 0:_.psAppSetting)==null?void 0:x.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" "+s(t.formatPrice(e.item?e.item.price:"")),1)]}),_:1})])):(i(),n("div",Le,[r(l,{class:"font-semibold text-base",textColor:"text-fePrimary-500 "},{default:a(()=>{var _,x;return[d(s(e.item&&((x=(_=t.appInfoStore.appInfo.data)==null?void 0:_.psAppSetting)==null?void 0:x.SelectedPriceType)==t.PsConst.NORMAL_PRICE?e.item.itemCurrency.currencySymbol:"")+" "+s(t.formatPrice(e.item?e.item.originalPrice:"")),1)]}),_:1})]))])):m("",!0),e.notShowTitle?m("",!0):(i(),n("div",{key:2,class:U([t.showProfile?"pb-0":"pb-2","ps-1 flex items-center"])},[r(c,{textColor:"text-feSecondary-400 dark_text-feAchromatic-500",name:"location-marker",h:"14",w:"14",class:"text-feSecondary-400 me-3",viewBox:"0 0 14 14"}),r(l,{class:"truncate font-normal text-sm",textColor:"text-feSecondary-400 dark:text-feSecondary-200"},{default:a(()=>[d(s(e.item?e.item.itemLocation.name:""),1)]),_:1})],2))]}),_:1},8,["to"])],2),r(y,{to:{name:"fe_other_profile",params:{userId:(v=(S=e.item)==null?void 0:S.user)==null?void 0:v.userId}}},{default:a(()=>{var h,u;return[t.showProfile?(i(),n("div",Fe,[g("div",Re,[M(g("img",Te,null,512),[[z,{src:o.$page.props.thumb1xUrl+"/"+((u=(h=e.item)==null?void 0:h.user)==null?void 0:u.userCoverPhoto),loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]]),e.item.user.isVerifybluemark=="1"?(i(),P(c,{key:0,class:"bg-feInfo-500 rounded-full absolute bottom-1 left-6",name:"bluemark",textColor:"text-feSecondary-50",w:"10",h:"10"})):m("",!0)]),g("p",Oe,[r(l,{class:"truncate text-xs",textColor:"text-feSecondary-800 dark:text-feSecondary-300"},{default:a(()=>[d(s(e.item.user.userName.length>12?e.item.user.userName.slice(0,12)+" ...":e.item.user.userName),1)]),_:1}),r(l,{class:"font-light text-xs",textColor:"text-feSecondary-500 dark:text-feSecondary-500"},{default:a(()=>[d(s(e.item?t.moment(e.item.addedDate).format(o.$page.props.dateFormat):""),1)]),_:1})])])):m("",!0)]}),_:1},8,["to"])]}),_:1})):m("",!0),((R=e.item)==null?void 0:R.adType)==t.PsConst.GOOGLE_AD?(i(),P(A,{key:1,class:"flex w-full flex-col"},{default:a(()=>[g("div",Ee,[r(f,{adFormat:"square",adStyle:"display:inline-block; width: 160px; height: 160px;",adStyleSm:"display:inline-block; width: 160px; height: 160px;",adStyleLg:"display:inline-block; width: 160px; height: 160px;"})])]),_:1})):m("",!0)]),r(N,{ref:"ps_loading_dialog"},null,512)],64)}var It=ue(_e,[["render",je],["__scopeId","data-v-5065f641"]]);export{It as default};
