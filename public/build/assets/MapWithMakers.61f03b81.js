import{L as t}from"./Control.Geocoder.bdf28440.js";import{_ as y}from"./plugin-vue_export-helper.21dcd24c.js";import{j as h,o as k,c as M}from"./app.d57d51e9.js";class v{constructor(){this.lat="",this.lng="",this.name="",this.id=""}}const w={name:"MapWithMakers",props:{lat:{type:Number,default:0},lng:{type:Number,default:0},markers:{type:Array,default:()=>[new v]},radius:{type:Number,default:1},dragValue:{type:Boolean,default:!0},dir:String},emit:["onChange"],setup(e,{emit:s}){let a=null;const g=1610;h(()=>{delete t.Icon.Default.prototype._getIconUrl;let c="",u=e.dir.replaceAll("\\","");u!=null&&u!=""?c="/"+e.dir:c="",t.Icon.Default.mergeOptions({iconRetinaUrl:c+"/images/assets/marker-icon-2x.png",iconUrl:c+"/images/assets/marker-icon.png",shadowUrl:c+"/images/assets/marker-shadow.png"});let l=17;const r=e.radius/.621371;r==0?l=13:r<=.5?l=15:r<=1?l=14:r<=2.5?l=13:r<=5?l=12:r<=10?l=11:r<=25?l=9:r<=50?l=8:r<=100?l=7:r<=200?l=6:r<=500?l=5:l=13,a=t.map("mapMarkerContainer").setView([e.lat,e.lng],l);var o;t.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(a),e.dragValue?(o=new t.Marker([e.lat==null||isNaN(e.lat)?0:e.lat,e.lng==null||isNaN(e.lng)?0:e.lng],{draggable:e.dragValue}).addTo(a),o.on("dragend",m)):(o=new t.Marker([e.lat==null||isNaN(e.lat)?0:e.lat,e.lng==null||isNaN(e.lng)?0:e.lng]).addTo(a),o.on("dragend"));var f=t.featureGroup();t.circle([44.6663888888889,6.775],{radius:150,color:"white",weight:.5,opacity:1,fillColor:"#ff9900",fillOpacity:1}).addTo(f),a.addLayer(f);var n=t.circle([e.lat,e.lng],e.radius*g,{color:"red",weight:.5,fillColor:"#93C5FD",fillOpacity:.3});a.addLayer(n),t.Control.geocoder({defaultMarkGeocode:!1}).addTo(a).on("markgeocode",function(i){a.removeLayer(o),a.flyTo(i.geocode.center,12),o=new t.Marker([i.geocode.properties.lat,i.geocode.properties.lon],{draggable:e.dragValue}).addTo(a);var d={lat:i.geocode.properties.lat,lng:i.geocode.properties.lon};s("onChange",d),a.removeLayer(n),n=new t.circle([d.lat,d.lng],e.radius*g,{color:"red",weight:.5,fillColor:"#93C5FD",fillOpacity:.3}),a.addLayer(n),o.on("dragend",m)});function m(i){var d=i.target.getLatLng();s("onChange",d),a.removeLayer(n),n=new t.circle([d.lat,d.lng],e.radius*g,{color:"red",weight:.5,fillColor:"#93C5FD",fillOpacity:.3}),a.addLayer(n)}})}},C={id:"mapMarkerContainer"};function L(e,s,a,g,c,_){return k(),M("div",C)}var x=y(w,[["render",L],["__scopeId","data-v-03933d46"]]);export{x as default};
