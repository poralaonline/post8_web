<?php
namespace App\Http\Services; use App\Config\ps_constant; use Carbon\Carbon; use Illuminate\Support\Facades\App; use Illuminate\Support\Facades\Gate; use Illuminate\Support\Facades\Http; use Modules\Core\Entities\ActivatedFileName; use Modules\Core\Entities\Project; use Modules\Core\Entities\SystemCode; class PsCoreService { function checkPermission($Z2H4PJzT = null, $ZMGJFK64 = null, $rcV7m2fR = null, $VEtzdH8J = null) { goto wPQnbTh4; MXNDfIAT: return redirectView($rcV7m2fR, $VEtzdH8J, "danger"); goto b90ffzPn; eQzBLOsz: QrsDb4Rb: goto vPl_1b5R; b90ffzPn: pS4HazmQ: goto D8KMPlBy; vPl_1b5R: if (!Gate::denies($Z2H4PJzT, $ZMGJFK64)) { goto pS4HazmQ; } goto MXNDfIAT; rR9NQGxo: $VEtzdH8J = __("no_permission"); goto eQzBLOsz; wPQnbTh4: if (!($VEtzdH8J == null)) { goto QrsDb4Rb; } goto rR9NQGxo; D8KMPlBy: } public function getSystemCode() { goto BRG7RQrH; ae5kb7GH: $d1cLUFrS = SystemCode::first(); goto v3CJLopz; BRG7RQrH: $ddX88XAr = SystemCode::first(); goto WxYWAbYk; tqtBcCPr: $yzgoz92l = base64_decode($ddX88XAr->code); goto mskuO5sK; yqYDJKkt: $Rehp1gTe = date_format($hlEobw4B, "M d, Y h:i:s"); goto pQxqi8vd; ui7jlJ5l: BSFFkK82: goto PV1RY2Df; WxYWAbYk: if (empty($ddX88XAr)) { goto BSFFkK82; } goto J5YKfvrs; VztsEoVI: $teapltKv = explode("/n", base64_decode($n9wW63Ex->code)); goto S9nXRidN; gjOkllLy: $Ov6Wg1DP = Carbon::now()->addDays(ps_constant::oHy17vlG); goto ae5kb7GH; mskuO5sK: $ek1ShSOB = Carbon::now(); goto gjOkllLy; v3CJLopz: $d1cLUFrS->code = base64_encode($yzgoz92l . $ek1ShSOB . "/n" . $Ov6Wg1DP); goto A00gih1T; J5YKfvrs: $O_kig5a4 = explode("/n", base64_decode($ddX88XAr->code)); goto fvGdUYCY; pQxqi8vd: return $Rehp1gTe; goto ui7jlJ5l; U38LckYU: $n9wW63Ex = SystemCode::first(); goto VztsEoVI; fvGdUYCY: if (!empty($O_kig5a4[2])) { goto o33tqhUf; } goto tqtBcCPr; A00gih1T: $d1cLUFrS->update(); goto YA9BcOqK; S9nXRidN: $hlEobw4B = date_create($teapltKv[2]); goto yqYDJKkt; YA9BcOqK: o33tqhUf: goto U38LckYU; PV1RY2Df: } public function updateLicense($oZaK48hx) { goto wzgilfDS; qYkpQkSD: $GPwOVWH2->Y1iMSr3E = $oZaK48hx->TpaLuv9I; goto IEUNyBCf; Ntz3nt50: $GPwOVWH2->AC122chf = "default"; goto p0L2SvnC; wzgilfDS: if (config('app.development')) { goto u89KIe3w; } goto tGuee1Tb; e4UqqyYH: KZPk8ayc: goto mGTgMQ1z; tmX6dWv9: $GPwOVWH2->update(); goto agU2qKZD; agU2qKZD: goto otQdV3Jf; goto g1IH0J_v; gQ5ESSR3: goto tgsu8EoU; goto e4UqqyYH; IEUNyBCf: $GPwOVWH2->bYwfoBYx = $oZaK48hx->zLsv5Rns; goto tmX6dWv9; epRAzlo3: $GPwOVWH2->save(); goto BMi2PnYT; FDMX5uPh: $gkXoZYR1 = json_decode(Http::withHeaders(['Authorization' => config('app.envato_token_type') . " " . config('app.envato_token')])->get(ps_constant::B7ieR2k1 . ps_constant::Ff2KLkjh . '/market/author/sale?code=' . $JFfrqEJU)); goto ewzMtjlm; p0L2SvnC: $GPwOVWH2->Y1iMSr3E = $oZaK48hx->TpaLuv9I; goto lneWuGVc; Ky7OkEzq: if (empty($fs1Tvij4)) { goto UU4yJvXy; } goto QOCKxXgz; FuDbk4Fz: $GPwOVWH2 = Project::first(); goto xBQnO07W; g1IH0J_v: s4qES4to: goto irDSckaE; ewzMtjlm: tgsu8EoU: goto U2gmkmXN; U2gmkmXN: $fs1Tvij4 = checkPurchasedCode($gkXoZYR1); goto Ky7OkEzq; xBQnO07W: if (empty($GPwOVWH2)) { goto s4qES4to; } goto qYkpQkSD; cYNRjVDK: goto iThvFyps; goto I1gpMMS_; Uk5WqBIE: $gkXoZYR1 = json_decode(file_get_contents(public_path('json/buyser-purchase-response.json'), true)); goto RDY6xWox; mGTgMQ1z: $JFfrqEJU = $oZaK48hx->TpaLuv9I; goto FDMX5uPh; I1gpMMS_: VmLz9UUn: goto Uk5WqBIE; H37IXdpn: u89KIe3w: goto FuDbk4Fz; BMi2PnYT: otQdV3Jf: goto PZCgmDgf; tGuee1Tb: if (App::environment("production")) { goto KZPk8ayc; } goto ov89_sfJ; ov89_sfJ: $JFfrqEJU = $oZaK48hx->TpaLuv9I; goto p8McV73q; S2M5mblb: $GPwOVWH2->K2wCPIcV = 1; goto epRAzlo3; lneWuGVc: $GPwOVWH2->bYwfoBYx = $oZaK48hx->zLsv5Rns; goto S2M5mblb; QOCKxXgz: return $fs1Tvij4; goto cK5kxQuL; nUtKpEzX: $gkXoZYR1 = ""; goto cYNRjVDK; irDSckaE: $GPwOVWH2 = new Project(); goto Ntz3nt50; p8McV73q: if ($JFfrqEJU == "00000000-0000-0000-0000-000000000000") { goto VmLz9UUn; } goto nUtKpEzX; cK5kxQuL: UU4yJvXy: goto H37IXdpn; RDY6xWox: iThvFyps: goto gQ5ESSR3; PZCgmDgf: } public function activateLicense($oZaK48hx) { goto pcKirm2h; im0pnsZp: $EwrLwPBU->status = "success"; goto tsooL45I; dPotWgup: $FyLDChvS->status = "success"; goto wVgHAdPk; uI9Hmut2: $EwrLwPBU = new \stdClass(); goto SWoJdYO1; G9H7nrA1: if ($fXPkiDKX !== $uvDmk0sU->bYwfoBYx) { goto hWg_DYD3; } goto YRk5S0vh; Zkwyu4KK: UrBArbF9: goto SWWvNrDr; eTdoRFXZ: $NrxByGjF->open($OlLmiYoK); goto tTjdliXB; pcKirm2h: config('app.key', $oZaK48hx->Hubf98OG); goto DBXod8hZ; SWoJdYO1: $EwrLwPBU->status = "danger"; goto g8UTBoZ8; z0fgqhCM: $RWPsNPo8->message = __('domain_verify_success'); goto mHJ9EAPg; aIeNIIUV: $elTtDQTR->save(); goto cQQxWMbq; uFK459Lg: if (!empty($OWxi5aph)) { goto QhfD54Cg; } goto MgqU3Iif; MgqU3Iif: $GPwOVWH2 = Project::first(); goto wLH2iyr7; YwGo8YuX: $FyLDChvS = new \stdClass(); goto dPotWgup; O_9yMAHA: KxO4aE6Z: goto GZm4lW7G; g8UTBoZ8: $EwrLwPBU->message = __('license_verify_fail'); goto tywNZ_LT; vVstAAE1: ++$OWxi5aph; goto Q3rhO6LE; UnvCGGvO: $EwrLwPBU = new \stdClass(); goto im0pnsZp; wrYhQzIO: r1oSTrkP: goto uFK459Lg; uW6kP4P_: $et20gCT9 = ["logMessages" => $jkT2v3A2, "hasError" => $OWxi5aph, "zipFileName" => $hKcj6Ko1]; goto xsOkxg35; BrKcigNu: $RWPsNPo8 = new \stdClass(); goto Jpq3cKPv; dc0Zxwrh: $jkT2v3A2[] = $FyLDChvS; goto FDHv7rmR; hdDDbbeb: $RWPsNPo8->status = "success"; goto z0fgqhCM; duMI9wlh: be647m5x: goto uI9Hmut2; R6FRt4p2: $QeeZCYUs = file_get_contents($hKcj6Ko1); goto k3e_SYN9; HHHjaRwv: $hKcj6Ko1 = str_replace("zip", "json", $oZaK48hx->MoTVyVcT); goto i1nkVTpD; EaVI16iE: $elTtDQTR->rQCqzwMQ = $hKcj6Ko1; goto dJVgwALk; DBXod8hZ: if ($oZaK48hx->hasFile("zipFile")) { goto KxO4aE6Z; } goto HHHjaRwv; SWWvNrDr: $FyLDChvS = new \stdClass(); goto Snkp9NXe; LmB58CRa: $elTtDQTR = new ActivatedFileName(); goto EaVI16iE; Snkp9NXe: $FyLDChvS->status = "danger"; goto Rk4PGZOl; mHJ9EAPg: $jkT2v3A2[] = $RWPsNPo8; goto Yizhyr3I; Rk4PGZOl: $FyLDChvS->message = __('base_proj_not_same'); goto zmcatGJG; t8V1XW1U: $GPwOVWH2 = $YV3a0DRt->Wzuxmtvl; goto JGsIw7Br; Jpq3cKPv: $RWPsNPo8->status = "danger"; goto ilg6snjU; zQHvRQ1n: if ($C1K5MCE_ !== $uvDmk0sU->Y1iMSr3E) { goto be647m5x; } goto UnvCGGvO; IvDTL5xd: $GPwOVWH2->update(); goto LmB58CRa; aLr3DlDQ: ++$OWxi5aph; goto nn4IRA6T; rbS3LrwC: $NrxByGjF->extractTo("./"); goto xPHaF_c9; ilg6snjU: $RWPsNPo8->message = __('domain_verify_fail'); goto wVU6YuwV; nn4IRA6T: IfFRY61S: goto zQHvRQ1n; FBkOQz31: $C1K5MCE_ = $c6BTiKow[1]; goto nGlto23Q; JGsIw7Br: $c6BTiKow = explode("\n", base64_decode($rfmhUlnR)); goto waiiO2t5; wVU6YuwV: $jkT2v3A2[] = $RWPsNPo8; goto aLr3DlDQ; cQQxWMbq: QhfD54Cg: goto uW6kP4P_; en_LOKRp: $NrxByGjF = new \ZipArchive(); goto eTdoRFXZ; YGSRKn5T: if ($GPwOVWH2->A8EwfLrH !== $uvDmk0sU->A8EwfLrH) { goto UrBArbF9; } goto YwGo8YuX; I6NgFJfe: $jkT2v3A2[] = $EwrLwPBU; goto z4YX_K0I; W0o6QrO2: $rfmhUlnR = $YV3a0DRt->Hubf98OG; goto t8V1XW1U; sduPCJhg: mbwMAiHU: goto R6FRt4p2; xPHaF_c9: $NrxByGjF->close(); goto sduPCJhg; waiiO2t5: $fXPkiDKX = $c6BTiKow[0]; goto FBkOQz31; xsOkxg35: return $et20gCT9; goto vVhQHM0s; Yizhyr3I: goto IfFRY61S; goto mDcT1Q_u; GZm4lW7G: $OlLmiYoK = $oZaK48hx->file("zipFile"); goto en_LOKRp; tTjdliXB: $hKcj6Ko1 = $NrxByGjF->getNameIndex(0); goto rbS3LrwC; tywNZ_LT: $jkT2v3A2[] = $EwrLwPBU; goto vVstAAE1; tsooL45I: $EwrLwPBU->message = __('license_verify_success'); goto I6NgFJfe; mDcT1Q_u: hWg_DYD3: goto BrKcigNu; i1nkVTpD: goto mbwMAiHU; goto O_9yMAHA; z4YX_K0I: goto dIZdW5nV; goto duMI9wlh; YRk5S0vh: $RWPsNPo8 = new \stdClass(); goto hdDDbbeb; yRTFn95P: $uvDmk0sU = Project::first(); goto xMHyCfrb; u81xfhO1: $jkT2v3A2 = []; goto yRTFn95P; EnNGPwi5: ++$OWxi5aph; goto wrYhQzIO; Q3rhO6LE: dIZdW5nV: goto YGSRKn5T; xMHyCfrb: $OWxi5aph = 0; goto G9H7nrA1; wVgHAdPk: $FyLDChvS->message = __('base_proj_same'); goto dc0Zxwrh; k3e_SYN9: $YV3a0DRt = json_decode($QeeZCYUs); goto W0o6QrO2; nGlto23Q: $DcN3HyXG = $c6BTiKow[2]; goto u81xfhO1; zmcatGJG: $jkT2v3A2[] = $FyLDChvS; goto EnNGPwi5; wLH2iyr7: $GPwOVWH2->ZMm_i3mr = $DcN3HyXG; goto IvDTL5xd; dJVgwALk: $elTtDQTR->xL0l29uw = 0; goto aIeNIIUV; FDHv7rmR: goto r1oSTrkP; goto Zkwyu4KK; vVhQHM0s: } public function activateLicenseFromBuilder($YV3a0DRt) { goto G7zZKq6U; SyWccWwA: $fXPkiDKX = $c6BTiKow[0]; goto I21udJQQ; GoefmUnN: if (!empty($OWxi5aph)) { goto Fzz9wev4; } goto rowkc7th; siT3dCQT: $EwrLwPBU->message = __('license_verify_success'); goto Vl9RpsE0; YeTofOdm: $EwrLwPBU = new \stdClass(); goto JjRGhX3Y; siu_B2rY: $FyLDChvS->status = "danger"; goto ZQhBgh1w; Gh0zbBsK: $RWPsNPo8->message = __('domain_verify_fail'); goto VXi87xRn; UcXVZvIC: $elTtDQTR->xL0l29uw = 0; goto mIeiqHpB; jzkdbqoK: goto XZuRIDMW; goto pnZ8WoXQ; zQaCgWJf: $RWPsNPo8->status = "success"; goto Sh8BDJG8; vDXXqFQI: $rfmhUlnR = $YV3a0DRt->Hubf98OG; goto GzhJhX17; Vl9RpsE0: $jkT2v3A2[] = $EwrLwPBU; goto jzkdbqoK; c3fH3JCf: $uvDmk0sU = Project::first(); goto pUhY5nAw; ZQhBgh1w: $FyLDChvS->message = __('base_proj_not_same'); goto EQIHZouv; k5sr8dZT: $GPwOVWH2->update(); goto YpRiwftd; VXi87xRn: $jkT2v3A2[] = $RWPsNPo8; goto CoM3lJ0V; S9y25LVd: $FyLDChvS = new \stdClass(); goto Y21U2UzT; YEF6E3GT: $jkT2v3A2[] = $EwrLwPBU; goto S9iWuWX5; d8Umx_Qy: $jkT2v3A2[] = $RWPsNPo8; goto H_8HQeUs; g01AYozL: $RWPsNPo8 = new \stdClass(); goto JScAzdqf; LzbrDp7A: goto yjS0z0Yu; goto RN2LgNkd; Y21U2UzT: $FyLDChvS->status = "success"; goto CYnUk7UU; KC7h0z2w: $jkT2v3A2 = []; goto c3fH3JCf; HdwsxDfu: XZuRIDMW: goto NVW10IoR; t_qf7iOX: BnSgj9pK: goto GhjyyToX; bjIOU_RL: $elTtDQTR->rQCqzwMQ = 'API'; goto UcXVZvIC; fvG5gRcH: $c6BTiKow = explode("\n", base64_decode($rfmhUlnR)); goto SyWccWwA; ftUshWVx: VB8SmeS5: goto g01AYozL; CoM3lJ0V: ++$OWxi5aph; goto t_qf7iOX; YpRiwftd: $elTtDQTR = new ActivatedFileName(); goto bjIOU_RL; RN2LgNkd: C2MPJ8xA: goto l4UEe3z2; JhSLno_N: $et20gCT9 = ["logMessages" => $jkT2v3A2, "hasError" => $OWxi5aph, "activateStatus" => $OWxi5aph == 0 ? 'true' : 'false']; goto lG9z5WTv; lG9z5WTv: return $et20gCT9; goto pwRLu4fq; rowkc7th: $GPwOVWH2 = Project::first(); goto pArIUMQ_; HD70LA9F: $jkT2v3A2[] = $FyLDChvS; goto LzbrDp7A; pUhY5nAw: $OWxi5aph = 0; goto Y4FisVAx; GhjyyToX: if ($C1K5MCE_ !== $uvDmk0sU->Y1iMSr3E) { goto SqLiLqJq; } goto BYL0f3ej; Tx_uVcYx: ++$OWxi5aph; goto nxXhRicV; G7zZKq6U: config('app.key', $YV3a0DRt->Hubf98OG); goto vDXXqFQI; nxXhRicV: yjS0z0Yu: goto GoefmUnN; UNXhqp8Z: $EwrLwPBU->status = "success"; goto siT3dCQT; S9iWuWX5: ++$OWxi5aph; goto HdwsxDfu; EQIHZouv: $jkT2v3A2[] = $FyLDChvS; goto Tx_uVcYx; GzhJhX17: $GPwOVWH2 = $YV3a0DRt->Wzuxmtvl; goto fvG5gRcH; pPU93prG: $EwrLwPBU->message = __('license_verify_fail'); goto YEF6E3GT; oFuNWF8m: $DcN3HyXG = $c6BTiKow[2]; goto KC7h0z2w; BYL0f3ej: $EwrLwPBU = new \stdClass(); goto UNXhqp8Z; fyOMYfDC: Fzz9wev4: goto JhSLno_N; H_8HQeUs: goto BnSgj9pK; goto ftUshWVx; Sh8BDJG8: $RWPsNPo8->message = __('domain_verify_success'); goto d8Umx_Qy; pArIUMQ_: $GPwOVWH2->ZMm_i3mr = $DcN3HyXG; goto k5sr8dZT; ukJbB4t2: $RWPsNPo8 = new \stdClass(); goto zQaCgWJf; I21udJQQ: $C1K5MCE_ = $c6BTiKow[1]; goto oFuNWF8m; JjRGhX3Y: $EwrLwPBU->status = "danger"; goto pPU93prG; NVW10IoR: if ($GPwOVWH2->A8EwfLrH !== $uvDmk0sU->A8EwfLrH) { goto C2MPJ8xA; } goto S9y25LVd; JScAzdqf: $RWPsNPo8->status = "danger"; goto Gh0zbBsK; pnZ8WoXQ: SqLiLqJq: goto YeTofOdm; CYnUk7UU: $FyLDChvS->message = __('base_proj_same'); goto HD70LA9F; l4UEe3z2: $FyLDChvS = new \stdClass(); goto siu_B2rY; mIeiqHpB: $elTtDQTR->save(); goto fyOMYfDC; Y4FisVAx: if ($fXPkiDKX !== $uvDmk0sU->bYwfoBYx) { goto VB8SmeS5; } goto ukJbB4t2; pwRLu4fq: } }